{"version":3,"sources":["color.js","dod.js","midi.js","util.js","multTableMod12.js","tonnetz.js","pitchClass.js","coltraneCircle.js","index.js"],"names":["HSVtoHex","h","s","v","r","g","b","i","f","p","q","t","arguments","length","Math","floor","_ref","componentToHex","c","hex","toString","rgbToHex","round","c1","c2","verts","Dod","_ref$rep","rep","sat","_ref$stack","stack","_ref$n","n","react_default","a","createElement","dist","position","map","key","color","events","click","console","log","primitive","join","scale","text","concat","Object","toConsumableArray","Midi","state","input","undefined","inputDevices","midiIn","_","zipObject","range","fill","Array","setDevice","ix","target","value","WebMidi","inputs","_this","setState","addListener","handleMidi","e","note","number","objectSpread","defineProperty","type","rawVelocity","_this2","this","enable","err","error","props","render","match","onChange","_ref2","name","React","Component","toSymbol","10","11","MultTableMod12","Fragment","y","x","style","padding","Tonnetz","lineHeight","paddingRight","pitchClass","_ref$position","_ref$scale","opacity","radius","align","font","negate","look-at","ColtraneCircle","midiInPitchClasses","pickBy","values","sum","filter","sin","PI","cos","includes","_ref3","_ref4","VR","path","id","src","react_router","routerProps","coltraneCircle_ColtraneCircle","assign","component","height","rotation","theta-length","width","animation__click","property","startEvents","from","to","dur","App","react_router_dom","exact","midi_Midi","background","bottom","ReactDOM","src_App","document","querySelector"],"mappings":"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","file":"static/js/main.b366dfcc.chunk.js","sourcesContent":["export function HSVtoHex(h, s, v) {\r\n  function rgbToHex({ r, g, b }) {\r\n    function componentToHex(c) {\r\n      var hex = c.toString(16);\r\n      return hex.length == 1 ? \"0\" + hex : hex;\r\n    }\r\n\r\n    return \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b);\r\n  }\r\n\r\n  var r, g, b, i, f, p, q, t;\r\n  if (arguments.length === 1) {\r\n    s = h.s;\r\n    v = h.v;\r\n    h = h.h;\r\n  }\r\n  i = Math.floor(h * 6);\r\n  f = h * 6 - i;\r\n  p = v * (1 - s);\r\n  q = v * (1 - f * s);\r\n  t = v * (1 - (1 - f) * s);\r\n  switch (i % 6) {\r\n    case 0: {\r\n      r = v;\r\n      g = t;\r\n      b = p;\r\n      break;\r\n    }\r\n    case 1: {\r\n      r = q;\r\n      g = v;\r\n      b = p;\r\n      break;\r\n    }\r\n    case 2: {\r\n      r = p;\r\n      g = v;\r\n      b = t;\r\n      break;\r\n    }\r\n    case 3: {\r\n      r = p;\r\n      g = q;\r\n      b = v;\r\n      break;\r\n    }\r\n    case 4: {\r\n      r = t;\r\n      g = p;\r\n      b = v;\r\n      break;\r\n    }\r\n    case 5: {\r\n      r = v;\r\n      g = p;\r\n      b = q;\r\n      break;\r\n    }\r\n  }\r\n  return rgbToHex({\r\n    r: Math.round(r * 255),\r\n    g: Math.round(g * 255),\r\n    b: Math.round(b * 255)\r\n  });\r\n}","import {Entity} from 'aframe-react';\r\nimport React from 'react';\r\nimport {HSVtoHex} from './color';\r\n\r\n// http://dmccooey.com/polyhedra/PentakisDodecahedron.txt\r\nconst c1 = 1.33058699733550141141687582919;\r\nconst c2 = 2.15293498667750705708437914596;\r\n\r\n// in ordered, opposite pairs\r\nconst verts = [\r\n  [0.0,  -c2,   c1],\r\n  [0.0,   c2,  -c1],\r\n  [ c2,  -c1,  0.0],\r\n  [-c2,   c1,  0.0],\r\n  [0.0,  -c2,  -c1],\r\n  [0.0,   c2,   c1],\r\n  [-c2,  -c1,  0.0],\r\n  [ c2,   c1,  0.0],\r\n  [-c1,  0.0,   c2],\r\n  [ c1,  0.0,  -c2],\r\n  [ c1,  0.0,   c2],\r\n  [-c1,  0.0,  -c2],\r\n];\r\n\r\nconst Dod = ({ rep = 1, sat, stack = [], n = 0 }) =>\r\n  <Entity position=\"0 0 0\">\r\n    {verts.map((v, i) =>\r\n      <Entity\r\n        key={i}\r\n        color={HSVtoHex(i * (1 / 12), sat || 1, 1)}\r\n        events={{ click: () => console.log(i) }}\r\n        primitive=\"a-sphere\"\r\n        position={v.join(' ')}\r\n        scale={[1, 1, 1].map(n => 0.3 * n/ (rep * rep)).join(' ')}\r\n      />)}\r\n\r\n    {rep < 3 && verts.map((v, i) =>\r\n      <Entity\r\n        key={i}\r\n        position={v.map(n => n * 2).join(' ')}\r\n        text={`color: ${HSVtoHex((stack.length ? stack[stack.length - 1] : i) * (1 / 12), 1, 1)}; align: center; value: ${[...stack, i].join(',')} - ${(n + i) % 12}; width: 5; zOffset: 0`}\r\n      >\r\n        <Dod rep={rep+1} sat={0.3} stack={[...stack, i]} n={(n + i) % 12} />\r\n      </Entity>)\r\n      // .filter((n, i) => i % 2)\r\n    }\r\n  </Entity>;\r\n\r\nexport default Dod;","import _ from 'lodash';\r\nimport React from 'react';\r\nimport WebMidi from 'webmidi';\r\n\r\nexport default class Midi extends React.Component {\r\n  state = {\r\n    input: undefined,\r\n    inputDevices: [],\r\n    midiIn: _.zipObject(\r\n      _.range(128),\r\n      _.fill(new Array(128), 0)),\r\n  };\r\n\r\n  componentDidMount() {\r\n    WebMidi.enable((err) => {\r\n      if (err) console.error(err);\r\n      else console.log('WebMidi enabled.');\r\n\r\n      this.setState({inputDevices: WebMidi.inputs});\r\n\r\n      console.log(WebMidi.inputs);\r\n      if (WebMidi.inputs[0]) {\r\n        WebMidi.inputs[0].addListener('noteon', 'all', this.handleMidi);\r\n        WebMidi.inputs[0].addListener('noteoff', 'all', this.handleMidi);\r\n      }\r\n    });\r\n  }\r\n\r\n  setDevice = ({target: {value: ix}}) => { // todo: remove prev listener\r\n    const input = WebMidi.inputs[ix];\r\n    console.log(ix, input);\r\n    this.setState({input});\r\n    input.addListener('noteon', 'all', this.handleMidi);\r\n    input.addListener('noteoff', 'all', this.handleMidi);\r\n  };\r\n\r\n  handleMidi = (e) => {\r\n    const n = e.note.number;\r\n    console.log(n)\r\n    this.setState({\r\n      midiIn: {\r\n        ...this.state.midiIn,\r\n        [n]: e.type === 'noteon' ? e.rawVelocity : 0\r\n      }\r\n    })\r\n  };\r\n\r\n  render() {\r\n    // return <div>devices</div>\r\n    return (this.state.input\r\n        ? this.props.render({ match: this.props.match, midiIn: this.state.midiIn })\r\n        : (\r\n          <select onChange={this.setDevice}>\r\n            {this.state.inputDevices.map(({name}, ix) => (\r\n              <option key={name} value={ix}>{name}</option>\r\n            ))}\r\n          </select>\r\n        )\r\n    );\r\n  }\r\n}\r\n","export const toSymbol = n => ({\r\n  10: '૪',\r\n  11: 'Ɛ',\r\n})[n % 12] || n % 12;\r\n","import _ from 'lodash';\r\nimport React from 'react';\r\nimport { toSymbol } from \"./util\";\r\n\r\nconst MultTableMod12 = () => (\r\n  <>\r\n    {_.range(6).map(n => (\r\n      <pre>\r\n        {_.range(13).map(y => (\r\n          <>\r\n            {_.range(13).map(x => (\r\n              <span key={x} style={{ padding: 3 }}>\r\n                {toSymbol(n + x * y)}\r\n              </span>\r\n            ))}\r\n            <br />\r\n          </>\r\n        ))}\r\n\r\n      </pre>\r\n    ))}\r\n  </>);\r\n\r\nexport default MultTableMod12;\r\n","import _ from 'lodash';\r\nimport React from 'react';\r\nimport { toSymbol } from \"./util\";\r\n\r\nconst Tonnetz = () => (\r\n  <pre style={{lineHeight: 3}}>\r\n\r\n    {_.range(20).map(y => (\r\n      <>\r\n        {y % 2 > 0 && (\r\n          <span style={{paddingRight: 21}}>\r\n            {' '}\r\n          </span>\r\n        )}\r\n\r\n        {_.range(30).map(x => (\r\n          <span key={x} style={{padding: 21}}>\r\n            {toSymbol(((y % 2 > 0\r\n              ? ((y - 1) / 2) * 11 + 3\r\n              : (y / 2) * 11) + x * 7))}\r\n          </span>\r\n        ))}\r\n        <br/>\r\n      </>\r\n    ))}\r\n\r\n</pre>);\r\n\r\nexport default Tonnetz;\r\n","import React from 'react';\r\nimport { HSVtoHex } from './color';\r\nimport { toSymbol } from \"./util\";\r\n\r\n\r\nexport default ({ n, midiIn, position = \"0 0 0\", scale = \"1 1 1\" }) =>\r\n  <a-sphere\r\n    color=\"black\"\r\n    opacity={0.3}\r\n    position={position}\r\n    radius={0.15}\r\n    scale={scale}\r\n  >\r\n    <a-text\r\n      align=\"center\"\r\n      color={HSVtoHex(n / 12, 0.75, 1)}\r\n      font=\"/unifont-12.1.04-msdf.json\"\r\n      negate=\"false\"\r\n      look-at=\"#camera\"\r\n      opacity={midiIn ? 1 : 0.25}\r\n      value={toSymbol(n)}\r\n    />\r\n  </a-sphere>\r\n","import _ from 'lodash';\r\nimport PitchClass from './pitchClass';\r\nimport React from 'react';\r\nimport { Entity } from 'aframe-react';\r\n\r\nexport default class ColtraneCircle extends React.Component {\r\n  render() {\r\n    const midiInPitchClasses = _(12)\r\n      .range()\r\n      .map(n => _(this.props.midiIn)\r\n        .pickBy((v, i) => i % 12 === n)\r\n        .values()\r\n        .sum())\r\n      .value();\r\n\r\n    return (\r\n      <Entity>\r\n        {_(12)\r\n          .range()\r\n          .filter(n => n % 2 == 0)\r\n          .map(n => ({\r\n            n,\r\n            r: 1.5,\r\n            x: -Math.sin(n * Math.PI / 6),\r\n            y: Math.cos(n * Math.PI / 6),\r\n          }))\r\n          .map(({ n, r, x, y }) => (\r\n            <PitchClass\r\n              midiIn={midiInPitchClasses[n]}\r\n              n={n}\r\n              position={`${r * x} ${r * y} 0`}\r\n            />))\r\n          .value()\r\n        }\r\n\r\n        {_(48)\r\n          .range()\r\n          .filter(n => !_.includes([6, 7, 0, 1], n % 8))\r\n          .map((n, i) => ({\r\n            i,\r\n            n: ((i + 1) * 2 + Math.floor(i / 4) * 2) % 12,\r\n            // n: (n * 2) % 12,\r\n            r: 1.5,\r\n            x: Math.sin((n + 0.5) * Math.PI / 24),\r\n            y: Math.cos((n + 0.5) * Math.PI / 24),\r\n          }))\r\n          .map(({ n, r, x, y }) => (\r\n            <PitchClass\r\n              midiIn={midiInPitchClasses[n]}\r\n              n={n}\r\n              position={`${r * x} ${r * y} 0`}\r\n              scale=\"0.5 0.5 0.5\"\r\n            />))\r\n          .value()\r\n        }\r\n\r\n        {_(12)\r\n          .range()\r\n          .filter(n => n % 2 != 0)\r\n          .map(n => ({\r\n            n: (n + 6) % 12,\r\n            r: 1.2,\r\n            x: -Math.sin(n * Math.PI / 6),\r\n            y: Math.cos(n * Math.PI / 6),\r\n          }))\r\n          .map(({ n, r, x, y }) => (\r\n            <PitchClass\r\n              midiIn={midiInPitchClasses[n]}\r\n              n={n}\r\n              position={`${r * x} ${r * y} 0`}\r\n            />))\r\n          .value()\r\n        }\r\n\r\n        {_(48)\r\n          .range()\r\n          .filter(n => !_.includes([4, 5, 6, 7], n % 8))\r\n          .map((n, i) => ({\r\n            i,\r\n            // n: i,\r\n            n: (i * 2 + 9 + Math.floor(i / 4) * 2) % 12,\r\n            // n: i,\r\n            r: 1.2,\r\n            x: Math.sin((n - 1.5) * Math.PI / 24),\r\n            y: Math.cos((n - 1.5) * Math.PI / 24),\r\n          }))\r\n          .map(({ n, r, x, y }) => (\r\n            <PitchClass\r\n              midiIn={midiInPitchClasses[n]}\r\n              n={n}\r\n              position={`${r * x} ${r * y} 0`}\r\n              scale=\"0.5 0.5 0.5\"\r\n            />))\r\n          .value()\r\n        }\r\n      </Entity>\r\n    );\r\n  }\r\n\r\n\r\n}\r\n","import 'aframe';\r\n// import 'aframe-animation-component';\r\n// import 'aframe-particle-system-component';\r\nimport 'aframe-look-at-component';\r\nimport _ from 'lodash';\r\nimport Dod from './dod';\r\nimport Midi from './midi';\r\nimport MultTableMod12 from './multTableMod12';\r\nimport Tonnetz from './tonnetz';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Entity, Scene } from 'aframe-react';\r\nimport ColtraneCircle from './coltraneCircle';\r\nimport { BrowserRouter as Router, Route, Switch, Link } from 'react-router-dom';\r\n\r\nconst VR = ({ match: { path }, midiIn }) => (\r\n  <Scene>\r\n    <a-assets>\r\n      <img id=\"groundTexture\" src=\"https://cdn.aframe.io/a-painter/images/floor.jpg\" />\r\n      <img id=\"skyTexture\" src=\"https://cdn.aframe.io/a-painter/images/sky.jpg\" />\r\n    </a-assets>\r\n\r\n    <Switch>\r\n      <Route path={`${path}/coltrane`} render={(routerProps) => <ColtraneCircle {...routerProps} midiIn={midiIn} />} />\r\n      <Route path={`${path}/dod`} component={Dod} />\r\n    </Switch>\r\n\r\n\r\n    {/*<Entity primitive=\"a-plane\" src=\"#groundTexture\" rotation=\"-90 0 0\" height=\"100\" width=\"100\"/>*/}\r\n    {/*<Entity primitive=\"a-light\" type=\"ambient\" color=\"#445451\"/>*/}\r\n    {/*<Entity primitive=\"a-light\" type=\"point\" intensity=\"2\" position=\"2 4 4\"/>*/}\r\n    <Entity\r\n      height=\"2048\"\r\n      primitive=\"a-sky\"\r\n      radius=\"30\"\r\n      rotation=\"90 0 0\"\r\n      src=\"#skyTexture\"\r\n      theta-length=\"90\"\r\n      width=\"2048\"\r\n    />\r\n    <Entity\r\n      height=\"2048\"\r\n      primitive=\"a-sky\"\r\n      radius=\"30\"\r\n      rotation=\"90 0 180\"\r\n      src=\"#skyTexture\"\r\n      theta-length=\"90\"\r\n      width=\"2048\"\r\n    />\r\n    {/*<Entity particle-system={{preset: 'snow', particleCount: 2000}}/>*/}\r\n    {/*<Entity text={{value: 'Hello, A-Frame React!', align: 'center'}} position={{x: 0, y: 2, z: -1}}/>*/}\r\n\r\n    {/*<Entity id=\"box\"*/}\r\n    {/*geometry={{primitive: 'box'}}*/}\r\n    {/*material={{color: this.state.color, opacity: 0.6}}*/}\r\n    {/*animation__rotate={{property: 'rotation', dur: 2000, loop: true, to: '360 360 360'}}*/}\r\n    {/*animation__scale={{property: 'scale', dir: 'alternate', dur: 100, loop: true, to: '1.1 1.1 1.1'}}*/}\r\n    {/*position={{x: 0, y: 1, z: -3}}*/}\r\n    {/*events={{click: this.changeColor.bind(this)}}>*/}\r\n    {/*<Entity animation__scale={{property: 'scale', dir: 'alternate', dur: 100, loop: true, to: '2 2 2'}}*/}\r\n    {/*geometry={{primitive: 'box', depth: 0.2, height: 0.2, width: 0.2}}*/}\r\n    {/*material={{color: '#24CAFF'}}/>*/}\r\n    {/*</Entity>*/}\r\n\r\n\r\n    <Entity primitive=\"a-camera\" id=\"camera\" position=\"0 0 2\">\r\n      <Entity primitive=\"a-cursor\" animation__click={{\r\n        property: 'scale',\r\n        startEvents: 'click',\r\n        from: '0.1 0.1 0.1',\r\n        to: '1 1 1',\r\n        dur: 150,\r\n      }} />\r\n    </Entity>\r\n  </Scene>\r\n);\r\n\r\nclass App extends React.Component {\r\n  render() {\r\n\r\n    return (\r\n      <Router>\r\n        <Route path=\"/\" exact render={routerProps => (\r\n            <h1>Hello World</h1>\r\n        )} />\r\n\r\n        <Route path=\"/multTableMod12\" render={MultTableMod12} />\r\n        <Route path=\"/tonnetz\" render={Tonnetz} />\r\n\r\n        <Route path=\"/vr\" render={(routerProps) => <Midi {...routerProps} render={VR} />} />\r\n\r\n        <div\r\n          style={{\r\n            background: 'black',\r\n            bottom: 0,\r\n            color: 'white',\r\n            position: 'absolute',\r\n          }}>\r\n\r\n          <Link to=\"/multTableMod12\">MultTable</Link>\r\n          -\r\n          <Link to=\"/tonnetz\">Tonnetz</Link>\r\n          --\r\n          <Link to=\"/vr/coltrane\">Coltrane Circle</Link>\r\n          -\r\n          <Link to=\"/vr/dod\">Dod</Link>\r\n\r\n\r\n\r\n        </div>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nReactDOM.render(<App />, document.querySelector('#sceneContainer'));\r\n"],"sourceRoot":""}