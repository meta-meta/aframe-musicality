{"version":3,"sources":["useMidi.js","midi.js","util.js","multTableMod12.js","numpadMod12.js","tonnetz.js","color.js","pitchClass.js","coltraneCircle.js","dod.js","vr.js","index.js"],"names":["initialState","input","undefined","inputDevices","isDeviceSelectorVisible","midiIn","_","zipObject","range","fill","Array","actions","setInputDevice","store","amount","newCounterValue","state","counter","setState","setInputDevices","setMidiEvent","midiEvt","merge","toggleDeviceSelector","globalHook","React","Midi","_useMidi","useMidi","_ref","_useMidi2","Object","slicedToArray","useEffect","WebMidi","enable","err","console","error","log","inputs","window","addEventListener","_ref2","code","handleMidi","_ref3","n","note","number","vel","rawVelocity","type","defineProperty","react_default","a","createElement","Menu","id","keepMounted","open","map","_ref4","ix","name","MenuItem","key","onClick","addListener","toSymbol","10","11","MultTableMod12","Fragment","y","x","style","padding","NumpadMod12","text","handleKeyPress","evt","char","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadDivide","NumpadMultiply","NumpadDecimal","NumpadEnter","_this","this","removeEventListener","Component","Tonnetz","lineHeight","paddingRight","HSVtoHex","h","s","v","r","g","b","i","f","p","q","t","arguments","length","Math","floor","componentToHex","c","hex","toString","rgbToHex","round","pitchClass","_ref$position","position","_ref$scale","scale","color","opacity","radius","align","font","negate","look-at","value","ColtraneCircle","_useState","useState","_useState2","is180","setIs180","toggle","midiInPitchClasses","pickBy","values","sum","dist","animation","concat","filter","sin","PI","cos","includes","_ref5","c1","c2","verts","Dod","_ref$rep","rep","sat","_ref$stack","stack","_ref$n","events","click","primitive","join","toConsumableArray","VR","path","match","src","react_router","component","height","rotation","theta-length","width","animation__click","property","startEvents","from","to","dur","ReactDOM","render","react_router_dom","basename","process","exact","routerProps","vr","numpadMod12","background","bottom","midi","document","querySelector","osc","OSC","sendOsc","address","_len","args","_key","send","construct","Message"],"mappings":"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","file":"static/js/main.4171f785.chunk.js","sourcesContent":["import _ from 'lodash';\r\nimport React from 'react';\r\nimport globalHook from 'use-global-hook';\r\n\r\nconst initialState = {\r\n  input: undefined,\r\n  inputDevices: [],\r\n  isDeviceSelectorVisible: false,\r\n  midiIn: _.zipObject(\r\n    _.range(128),\r\n    _.fill(new Array(128), 0)),\r\n};\r\n\r\nconst actions = {\r\n  setInputDevice: (store, amount) => {\r\n    const newCounterValue = store.state.counter + amount;\r\n    store.setState({counter: newCounterValue});\r\n  },\r\n\r\n  setInputDevices: (store, inputDevices) =>\r\n    store.setState({inputDevices}),\r\n\r\n  setMidiEvent: (store, midiEvt) =>\r\n    store.setState({midiIn: _.merge(store.state.midiIn, midiEvt)}),\r\n\r\n  toggleDeviceSelector: (store) =>\r\n    store.setState({isDeviceSelectorVisible: !store.state.isDeviceSelectorVisible}),\r\n};\r\n\r\nexport default globalHook(React, initialState, actions);\r\n","import Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport React, {useEffect} from 'react';\r\nimport useMidi from './useMidi';\r\nimport WebMidi from 'webmidi';\r\n\r\nconst Midi = () => {\r\n\r\n  const [state, actions] = useMidi( // https://github.com/andregardi/use-global-hook#avoid-unnecessary-renders\r\n    ({inputDevices, isDeviceSelectorVisible}) => ({inputDevices, isDeviceSelectorVisible}),\r\n    actions => actions,\r\n  );\r\n\r\n  const {\r\n    inputDevices,\r\n    isDeviceSelectorVisible,\r\n  } = state;\r\n\r\n  useEffect(() => {\r\n    WebMidi.enable((err) => {\r\n      if (err) console.error(err);\r\n      else {\r\n        console.log('WebMidi enabled.');\r\n        actions.setInputDevices(WebMidi.inputs);\r\n      }\r\n    });\r\n\r\n    window.addEventListener('keyup', ({ code }) => {\r\n      if (code === 'Space') actions.toggleDeviceSelector();\r\n    })\r\n  }, []);\r\n\r\n\r\n  const handleMidi = ({note: {number: n}, rawVelocity: vel, type}) =>\r\n    actions.setMidiEvent({\r\n      [n]: type === 'noteon' ? vel : 0\r\n    });\r\n\r\n  return (\r\n    <Menu\r\n      id=\"simple-menu\"\r\n      // anchorEl={anchorEl}\r\n      keepMounted\r\n      open={isDeviceSelectorVisible}\r\n    >\r\n      {inputDevices.map(({name}, ix) => (\r\n        <MenuItem\r\n          key={name}\r\n          onClick={() => { // todo: remove prev listener\r\n            const input = inputDevices[ix];\r\n            actions.setInputDevice(input);\r\n            actions.toggleDeviceSelector();\r\n            input.addListener('noteon', 'all', handleMidi);\r\n            input.addListener('noteoff', 'all', handleMidi);\r\n          }}>\r\n          {name}\r\n        </MenuItem>\r\n      ))}\r\n    </Menu>\r\n  );\r\n};\r\n\r\nexport default Midi;\r\n","export const toSymbol = n => ({\r\n  10: '૪',\r\n  11: 'Ɛ',\r\n})[n % 12] || n % 12;\r\n","import _ from 'lodash';\r\nimport React from 'react';\r\nimport { toSymbol } from \"./util\";\r\n\r\nconst MultTableMod12 = () => (\r\n  <>\r\n    {_.range(6).map(n => (\r\n      <pre>\r\n        {_.range(13).map(y => (\r\n          <>\r\n            {_.range(13).map(x => (\r\n              <span key={x} style={{ padding: 3 }}>\r\n                {toSymbol(n + x * y)}\r\n              </span>\r\n            ))}\r\n            <br />\r\n          </>\r\n        ))}\r\n\r\n      </pre>\r\n    ))}\r\n  </>);\r\n\r\nexport default MultTableMod12;\r\n","import _ from 'lodash';\r\nimport React, { Component } from 'react';\r\nimport { toSymbol } from \"./util\";\r\n\r\nclass NumpadMod12 extends Component {\r\n  state = {\r\n    text: '',\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('keypress', this.handleKeyPress);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keypress', this.handleKeyPress);\r\n  }\r\n\r\n  handleKeyPress = (evt) => {\r\n    // console.log(evt.code)\r\n    const char = {\r\n      Numpad0: '0',\r\n      Numpad1: '1',\r\n      Numpad2: '2',\r\n      Numpad3: '3',\r\n      Numpad4: '4',\r\n      Numpad5: '5',\r\n      Numpad6: '6',\r\n      Numpad7: '7',\r\n      Numpad8: '8',\r\n      Numpad9: '9',\r\n      NumpadDivide: '૪',\r\n      NumpadMultiply: 'Ɛ',\r\n      NumpadDecimal: ' ',\r\n      NumpadEnter: '\\n',\r\n    }[evt.code];\r\n\r\n    if (char) this.setState({ text: this.state.text + char });\r\n  };\r\n\r\n  render() {\r\n    return <div>\r\n      <h3>Use the numpad to enter pitch classes</h3>\r\n      <pre>\r\n          {this.state.text}\r\n      </pre>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default NumpadMod12;\r\n","import _ from 'lodash';\r\nimport React from 'react';\r\nimport { toSymbol } from \"./util\";\r\n\r\nconst Tonnetz = () => (\r\n  <pre style={{lineHeight: 3}}>\r\n\r\n    {_.range(20).map(y => (\r\n      <>\r\n        {y % 2 > 0 && (\r\n          <span style={{paddingRight: 21}}>\r\n            {' '}\r\n          </span>\r\n        )}\r\n\r\n        {_.range(30).map(x => (\r\n          <span key={x} style={{padding: 21}}>\r\n            {toSymbol(((y % 2 > 0\r\n              ? ((y - 1) / 2) * 11 + 3\r\n              : (y / 2) * 11) + x * 7))}\r\n          </span>\r\n        ))}\r\n        <br/>\r\n      </>\r\n    ))}\r\n\r\n</pre>);\r\n\r\nexport default Tonnetz;\r\n","export function HSVtoHex(h, s, v) {\r\n  function rgbToHex({ r, g, b }) {\r\n    function componentToHex(c) {\r\n      var hex = c.toString(16);\r\n      return hex.length == 1 ? \"0\" + hex : hex;\r\n    }\r\n\r\n    return \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b);\r\n  }\r\n\r\n  var r, g, b, i, f, p, q, t;\r\n  if (arguments.length === 1) {\r\n    s = h.s;\r\n    v = h.v;\r\n    h = h.h;\r\n  }\r\n  i = Math.floor(h * 6);\r\n  f = h * 6 - i;\r\n  p = v * (1 - s);\r\n  q = v * (1 - f * s);\r\n  t = v * (1 - (1 - f) * s);\r\n  switch (i % 6) {\r\n    case 0: {\r\n      r = v;\r\n      g = t;\r\n      b = p;\r\n      break;\r\n    }\r\n    case 1: {\r\n      r = q;\r\n      g = v;\r\n      b = p;\r\n      break;\r\n    }\r\n    case 2: {\r\n      r = p;\r\n      g = v;\r\n      b = t;\r\n      break;\r\n    }\r\n    case 3: {\r\n      r = p;\r\n      g = q;\r\n      b = v;\r\n      break;\r\n    }\r\n    case 4: {\r\n      r = t;\r\n      g = p;\r\n      b = v;\r\n      break;\r\n    }\r\n    case 5: {\r\n      r = v;\r\n      g = p;\r\n      b = q;\r\n      break;\r\n    }\r\n  }\r\n  return rgbToHex({\r\n    r: Math.round(r * 255),\r\n    g: Math.round(g * 255),\r\n    b: Math.round(b * 255)\r\n  });\r\n}","import React from 'react';\r\nimport { HSVtoHex } from './color';\r\nimport { toSymbol } from \"./util\";\r\n\r\n\r\nexport default ({ n, midiIn, position = \"0 0 0\", scale = \"1 1 1\" }) =>\r\n  <a-sphere\r\n    color=\"black\"\r\n    opacity={0.3}\r\n    position={position}\r\n    radius={0.15}\r\n    scale={scale}\r\n  >\r\n    <a-text\r\n      align=\"center\"\r\n      color={HSVtoHex(n / 12, 0.75, 1)}\r\n      font=\"../unifont-12.1.04-msdf.json\"\r\n      negate=\"false\"\r\n      look-at=\"#camera\"\r\n      opacity={midiIn ? 1 : 0.25}\r\n      value={toSymbol(n)}\r\n    />\r\n  </a-sphere>\r\n","import _ from 'lodash';\r\nimport PitchClass from './pitchClass';\r\nimport React, {useEffect, useState} from 'react';\r\nimport useMidi from \"./useMidi\";\r\nimport {Entity} from 'aframe-react';\r\n\r\nconst ColtraneCircle = () => {\r\n  const [is180, setIs180] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const toggle = ({key}) => {\r\n      if (key === 'r') setIs180(is180 => !is180);\r\n    };\r\n\r\n    window.addEventListener('keyup', toggle);\r\n    return () => window.removeEventListener('keyup', toggle);\r\n  }, []);\r\n\r\n  const [{midiIn}] = useMidi();\r\n\r\n  const midiInPitchClasses = _(12)\r\n    .range()\r\n    .map(n => _(midiIn)\r\n      .pickBy((v, i) => i % 12 === n)\r\n      .values()\r\n      .sum())\r\n    .value();\r\n\r\n  return (// https://www.npmjs.com/package/aframe-animation-component\r\n    <Entity animation={`property: rotation; to: 0 ${is180 ? 180 : 0} 0; dur: 500;`}>\r\n      {_(12)\r\n        .range()\r\n        .filter(n => n % 2 == 0)\r\n        .map(n => ({\r\n          n,\r\n          r: 1.5,\r\n          x: -Math.sin(n * Math.PI / 6),\r\n          y: Math.cos(n * Math.PI / 6),\r\n        }))\r\n        .map(({n, r, x, y}) => (\r\n          <PitchClass\r\n            midiIn={midiInPitchClasses[n]}\r\n            n={n}\r\n            position={`${r * x} ${r * y} 0`}\r\n          />))\r\n        .value()\r\n      }\r\n\r\n      {_(48)\r\n        .range()\r\n        .filter(n => !_.includes([6, 7, 0, 1], n % 8))\r\n        .map((n, i) => ({\r\n          i,\r\n          n: ((i + 1) * 2 + Math.floor(i / 4) * 2) % 12,\r\n          // n: (n * 2) % 12,\r\n          r: 1.5,\r\n          x: Math.sin((n + 0.5) * Math.PI / 24),\r\n          y: Math.cos((n + 0.5) * Math.PI / 24),\r\n        }))\r\n        .map(({n, r, x, y}) => (\r\n          <PitchClass\r\n            midiIn={midiInPitchClasses[n]}\r\n            n={n}\r\n            position={`${r * x} ${r * y} 0`}\r\n            scale=\"0.5 0.5 0.5\"\r\n          />))\r\n        .value()\r\n      }\r\n\r\n      {_(12)\r\n        .range()\r\n        .filter(n => n % 2 != 0)\r\n        .map(n => ({\r\n          n: (n + 6) % 12,\r\n          r: 1.2,\r\n          x: -Math.sin(n * Math.PI / 6),\r\n          y: Math.cos(n * Math.PI / 6),\r\n        }))\r\n        .map(({n, r, x, y}) => (\r\n          <PitchClass\r\n            midiIn={midiInPitchClasses[n]}\r\n            n={n}\r\n            position={`${r * x} ${r * y} 0`}\r\n          />))\r\n        .value()\r\n      }\r\n\r\n      {_(48)\r\n        .range()\r\n        .filter(n => !_.includes([4, 5, 6, 7], n % 8))\r\n        .map((n, i) => ({\r\n          i,\r\n          // n: i,\r\n          n: (i * 2 + 9 + Math.floor(i / 4) * 2) % 12,\r\n          // n: i,\r\n          r: 1.2,\r\n          x: Math.sin((n - 1.5) * Math.PI / 24),\r\n          y: Math.cos((n - 1.5) * Math.PI / 24),\r\n        }))\r\n        .map(({n, r, x, y}) => (\r\n          <PitchClass\r\n            midiIn={midiInPitchClasses[n]}\r\n            n={n}\r\n            position={`${r * x} ${r * y} 0`}\r\n            scale=\"0.5 0.5 0.5\"\r\n          />))\r\n        .value()\r\n      }\r\n    </Entity>\r\n  );\r\n};\r\n\r\nexport default ColtraneCircle;\r\n","import {Entity} from 'aframe-react';\r\nimport React from 'react';\r\nimport {HSVtoHex} from './color';\r\n\r\n// http://dmccooey.com/polyhedra/PentakisDodecahedron.txt\r\nconst c1 = 1.33058699733550141141687582919;\r\nconst c2 = 2.15293498667750705708437914596;\r\n\r\n// in ordered, opposite pairs\r\nconst verts = [\r\n  [0.0,  -c2,   c1],\r\n  [0.0,   c2,  -c1],\r\n  [ c2,  -c1,  0.0],\r\n  [-c2,   c1,  0.0],\r\n  [0.0,  -c2,  -c1],\r\n  [0.0,   c2,   c1],\r\n  [-c2,  -c1,  0.0],\r\n  [ c2,   c1,  0.0],\r\n  [-c1,  0.0,   c2],\r\n  [ c1,  0.0,  -c2],\r\n  [ c1,  0.0,   c2],\r\n  [-c1,  0.0,  -c2],\r\n];\r\n\r\nconst Dod = ({ rep = 1, sat, stack = [], n = 0 }) =>\r\n  <Entity position=\"0 0 0\">\r\n    {verts.map((v, i) =>\r\n      <Entity\r\n        key={i}\r\n        color={HSVtoHex(i * (1 / 12), sat || 1, 1)}\r\n        events={{ click: () => console.log(i) }}\r\n        primitive=\"a-sphere\"\r\n        position={v.join(' ')}\r\n        scale={[1, 1, 1].map(n => 0.3 * n/ (rep * rep)).join(' ')}\r\n      />)}\r\n\r\n    {rep < 3 && verts.map((v, i) =>\r\n      <Entity\r\n        key={i}\r\n        position={v.map(n => n * 2).join(' ')}\r\n        text={`color: ${HSVtoHex((stack.length ? stack[stack.length - 1] : i) * (1 / 12), 1, 1)}; align: center; value: ${[...stack, i].join(',')} - ${(n + i) % 12}; width: 5; zOffset: 0`}\r\n      >\r\n        <Dod rep={rep+1} sat={0.3} stack={[...stack, i]} n={(n + i) % 12} />\r\n      </Entity>)\r\n      // .filter((n, i) => i % 2)\r\n    }\r\n  </Entity>;\r\n\r\nexport default Dod;","import ColtraneCircle from \"./coltraneCircle\";\r\nimport Dod from './dod';\r\nimport React from 'react';\r\nimport {Entity, Scene} from 'aframe-react';\r\nimport {Route, Switch} from 'react-router-dom';\r\n\r\n// Note: needs https to enter VR\r\n\r\nconst VR = ({match: {path}}) => (\r\n  <Scene>\r\n    <a-assets>\r\n      <img id=\"groundTexture\" src=\"https://cdn.aframe.io/a-painter/images/floor.jpg\"/>\r\n      <img id=\"skyTexture\" src=\"https://cdn.aframe.io/a-painter/images/sky.jpg\"/>\r\n    </a-assets>\r\n\r\n    <Switch>\r\n      <Route path={`${path}/coltrane`} component={ColtraneCircle}/>\r\n      <Route path={`${path}/dod`} component={Dod}/>\r\n    </Switch>\r\n\r\n\r\n    {/*<Entity primitive=\"a-plane\" src=\"#groundTexture\" rotation=\"-90 0 0\" height=\"100\" width=\"100\"/>*/}\r\n    {/*<Entity primitive=\"a-light\" type=\"ambient\" color=\"#445451\"/>*/}\r\n    {/*<Entity primitive=\"a-light\" type=\"point\" intensity=\"2\" position=\"2 4 4\"/>*/}\r\n\r\n    <Entity\r\n      height=\"2048\"\r\n      primitive=\"a-sky\"\r\n      radius=\"30\"\r\n      rotation=\"90 0 0\"\r\n      src=\"#skyTexture\"\r\n      theta-length=\"90\"\r\n      width=\"2048\"\r\n    />\r\n    <Entity\r\n      height=\"2048\"\r\n      primitive=\"a-sky\"\r\n      radius=\"30\"\r\n      rotation=\"90 0 180\"\r\n      src=\"#skyTexture\"\r\n      theta-length=\"90\"\r\n      width=\"2048\"\r\n    />\r\n\r\n    <Entity primitive=\"a-camera\" id=\"camera\" position=\"0 0 2\">\r\n      <Entity primitive=\"a-cursor\" animation__click={{\r\n        property: 'scale',\r\n        startEvents: 'click',\r\n        from: '0.1 0.1 0.1',\r\n        to: '1 1 1',\r\n        dur: 150,\r\n      }}/>\r\n    </Entity>\r\n  </Scene>\r\n);\r\n\r\nexport default VR;\r\n","import 'aframe';\r\n// import 'aframe-animation-component';\r\nimport 'aframe-look-at-component';\r\nimport Midi from './midi';\r\nimport MultTableMod12 from './multTableMod12';\r\nimport NumpadMod12 from './numpadMod12';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Tonnetz from './tonnetz';\r\nimport OSC from 'osc-js';\r\n\r\nimport { BrowserRouter as Router, Route, Link } from 'react-router-dom';\r\nimport VR from './vr';\r\n\r\nconst App = () => (\r\n  <Router basename={process.env.PUBLIC_URL}>\r\n    <Route path=\"/\" exact render={routerProps => (\r\n      <h1>Hello World</h1>\r\n    )} />\r\n\r\n    <Route path=\"/vr\" render={(routerProps) => <VR {...routerProps} />} />\r\n\r\n    <Route path=\"/multTableMod12\" render={MultTableMod12} />\r\n\r\n    <Route path=\"/numpadMod12\" render={() => <NumpadMod12 />} />\r\n\r\n    <Route path=\"/tonnetz\" render={Tonnetz} />\r\n\r\n\r\n    <div\r\n      style={{\r\n        background: 'black',\r\n        bottom: 0,\r\n        color: 'white',\r\n        position: 'absolute',\r\n      }}>\r\n\r\n      <Link to=\"/numpadMod12\">Numpad</Link>\r\n      -\r\n      <Link to=\"/multTableMod12\">MultTable</Link>\r\n      -\r\n      <Link to=\"/tonnetz\">Tonnetz</Link>\r\n      --\r\n      <Link to=\"/vr/coltrane\">Coltrane Circle</Link>\r\n      -\r\n      <Link to=\"/vr/dod\">Dod</Link>\r\n\r\n      <Midi />\r\n\r\n\r\n    </div>\r\n  </Router>\r\n);\r\n\r\nReactDOM.render(<App />, document.querySelector('#sceneContainer'));\r\n\r\n\r\nconst osc = new OSC();\r\nosc.open();\r\nwindow.osc = osc;\r\nwindow.sendOsc = (address, ...args) => osc.send(new OSC.Message(address, ...args));\r\n"],"sourceRoot":""}