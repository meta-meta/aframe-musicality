(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,n){e.exports=n(41)},41:function(e,t,n){"use strict";n.r(t);var a=n(10),r=n(11),i=n(13),c=n(12),o=n(14),l=(n(30),n(31),n(1)),u=n.n(l),s=n(22),m=n(4),p=n(0),d=n.n(p);function h(e,t,n){var a,r,i,c,o,l,u,s;switch(1===arguments.length&&(t=e.s,n=e.v,e=e.h),l=n*(1-t),u=n*(1-(o=6*e-(c=Math.floor(6*e)))*t),s=n*(1-(1-o)*t),c%6){case 0:a=n,r=s,i=l;break;case 1:a=u,r=n,i=l;break;case 2:a=l,r=n,i=s;break;case 3:a=l,r=u,i=n;break;case 4:a=s,r=l,i=n;break;case 5:a=n,r=l,i=u}return function(e){var t=e.r,n=e.g,a=e.b;function r(e){var t=e.toString(16);return 1==t.length?"0"+t:t}return"#"+r(t)+r(n)+r(a)}({r:Math.round(255*a),g:Math.round(255*r),b:Math.round(255*i)})}var f=1.3305869973355013,E=2.152934986677507,v=[[0,-E,f],[0,E,-f],[E,-f,0],[-E,f,0],[0,-E,-f],[0,E,f],[-E,-f,0],[E,f,0],[-f,0,E],[f,0,-E],[f,0,E],[-f,0,-E]],g=function e(t){var n=t.rep,a=void 0===n?1:n,r=t.sat,i=t.stack,c=void 0===i?[]:i,o=t.n,l=void 0===o?0:o;return d.a.createElement(m.Entity,{position:"0 0 0"},v.map(function(e,t){return d.a.createElement(m.Entity,{key:t,color:h(t*(1/12),r||1,1),events:{click:function(){return console.log(t)}},primitive:"a-sphere",position:e.join(" "),scale:[1,1,1].map(function(e){return.3*e/(a*a)}).join(" ")})}),a<3&&v.map(function(t,n){return d.a.createElement(m.Entity,{key:n,position:t.map(function(e){return 2*e}).join(" "),text:"color: ".concat(h((c.length?c[c.length-1]:n)*(1/12),1,1),"; align: center; value: ").concat([].concat(Object(s.a)(c),[n]).join(",")," - ").concat((l+n)%12,"; width: 5; zOffset: 0")},d.a.createElement(e,{rep:a+1,sat:.3,stack:[].concat(Object(s.a)(c),[n]),n:(l+n)%12}))}))},b=n(17),y=n(25),k=n(8),M=n.n(k),j=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).state={input:void 0,inputDevices:[],midiIn:u.a.zipObject(u.a.range(128),u.a.fill(new Array(128),0))},n.setDevice=function(e){var t=e.target.value,a=M.a.inputs[t];console.log(t,a),n.setState({input:a}),a.addListener("noteon","all",n.handleMidi),a.addListener("noteoff","all",n.handleMidi)},n.handleMidi=function(e){var t=e.note.number;console.log(t),n.setState({midiIn:Object(y.a)({},n.state.midiIn,Object(b.a)({},t,"noteon"===e.type?e.rawVelocity:0))})},n}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;M.a.enable(function(t){t?console.error(t):console.log("WebMidi enabled."),e.setState({inputDevices:M.a.inputs}),console.log(M.a.inputs),M.a.inputs[0]&&(M.a.inputs[0].addListener("noteon","all",e.handleMidi),M.a.inputs[0].addListener("noteoff","all",e.handleMidi))})}},{key:"render",value:function(){return this.state.input?this.props.render({match:this.props.match,midiIn:this.state.midiIn}):d.a.createElement("select",{onChange:this.setDevice},this.state.inputDevices.map(function(e,t){var n=e.name;return d.a.createElement("option",{key:n,value:t},n)}))}}]),t}(d.a.Component),O=function(e){return{10:"\u0aea",11:"\u0190"}[e%12]||e%12},I=function(){return d.a.createElement(d.a.Fragment,null,u.a.range(6).map(function(e){return d.a.createElement("pre",null,u.a.range(13).map(function(t){return d.a.createElement(d.a.Fragment,null,u.a.range(13).map(function(n){return d.a.createElement("span",{key:n,style:{padding:3}},O(e+n*t))}),d.a.createElement("br",null))}))}))},x=function(){return d.a.createElement("pre",{style:{lineHeight:3}},u.a.range(20).map(function(e){return d.a.createElement(d.a.Fragment,null,e%2>0&&d.a.createElement("span",{style:{paddingRight:21}}," "),u.a.range(30).map(function(t){return d.a.createElement("span",{key:t,style:{padding:21}},O((e%2>0?(e-1)/2*11+3:e/2*11)+7*t))}),d.a.createElement("br",null))}))},w=n(26),P=n.n(w),T=function(e){var t=e.n,n=e.midiIn,a=e.position,r=void 0===a?"0 0 0":a,i=e.scale,c=void 0===i?"1 1 1":i;return d.a.createElement("a-sphere",{color:"black",opacity:.3,position:r,radius:.15,scale:c},d.a.createElement("a-text",{align:"center",color:h(t/12,.75,1),font:"/unifont-12.1.04-msdf.json",negate:"false","look-at":"#camera",opacity:n?1:.25,value:O(t)}))},C=function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=u()(12).range().map(function(t){return u()(e.props.midiIn).pickBy(function(e,n){return n%12===t}).values().sum()}).value();return d.a.createElement(m.Entity,null,u()(12).range().filter(function(e){return e%2==0}).map(function(e){return{n:e,r:1.5,x:-Math.sin(e*Math.PI/6),y:Math.cos(e*Math.PI/6)}}).map(function(e){var n=e.n,a=e.r,r=e.x,i=e.y;return d.a.createElement(T,{midiIn:t[n],n:n,position:"".concat(a*r," ").concat(a*i," 0")})}).value(),u()(48).range().filter(function(e){return!u.a.includes([6,7,0,1],e%8)}).map(function(e,t){return{i:t,n:(2*(t+1)+2*Math.floor(t/4))%12,r:1.5,x:Math.sin((e+.5)*Math.PI/24),y:Math.cos((e+.5)*Math.PI/24)}}).map(function(e){var n=e.n,a=e.r,r=e.x,i=e.y;return d.a.createElement(T,{midiIn:t[n],n:n,position:"".concat(a*r," ").concat(a*i," 0"),scale:"0.5 0.5 0.5"})}).value(),u()(12).range().filter(function(e){return e%2!=0}).map(function(e){return{n:(e+6)%12,r:1.2,x:-Math.sin(e*Math.PI/6),y:Math.cos(e*Math.PI/6)}}).map(function(e){var n=e.n,a=e.r,r=e.x,i=e.y;return d.a.createElement(T,{midiIn:t[n],n:n,position:"".concat(a*r," ").concat(a*i," 0")})}).value(),u()(48).range().filter(function(e){return!u.a.includes([4,5,6,7],e%8)}).map(function(e,t){return{i:t,n:(2*t+9+2*Math.floor(t/4))%12,r:1.2,x:Math.sin((e-1.5)*Math.PI/24),y:Math.cos((e-1.5)*Math.PI/24)}}).map(function(e){var n=e.n,a=e.r,r=e.x,i=e.y;return d.a.createElement(T,{midiIn:t[n],n:n,position:"".concat(a*r," ").concat(a*i," 0"),scale:"0.5 0.5 0.5"})}).value())}}]),t}(d.a.Component),D=n(7),S=n(15),z=function(e){var t=e.match.path,n=e.midiIn;return d.a.createElement(m.Scene,null,d.a.createElement("a-assets",null,d.a.createElement("img",{id:"groundTexture",src:"https://cdn.aframe.io/a-painter/images/floor.jpg"}),d.a.createElement("img",{id:"skyTexture",src:"https://cdn.aframe.io/a-painter/images/sky.jpg"})),d.a.createElement(D.c,null,d.a.createElement(D.a,{path:"".concat(t,"/coltrane"),render:function(e){return d.a.createElement(C,Object.assign({},e,{midiIn:n}))}}),d.a.createElement(D.a,{path:"".concat(t,"/dod"),component:g})),d.a.createElement(m.Entity,{height:"2048",primitive:"a-sky",radius:"30",rotation:"90 0 0",src:"#skyTexture","theta-length":"90",width:"2048"}),d.a.createElement(m.Entity,{height:"2048",primitive:"a-sky",radius:"30",rotation:"90 0 180",src:"#skyTexture","theta-length":"90",width:"2048"}),d.a.createElement(m.Entity,{primitive:"a-camera",id:"camera",position:"0 0 2"},d.a.createElement(m.Entity,{primitive:"a-cursor",animation__click:{property:"scale",startEvents:"click",from:"0.1 0.1 0.1",to:"1 1 1",dur:150}})))},L=function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return d.a.createElement(S.a,null,d.a.createElement(D.a,{path:"/",exact:!0,render:function(e){return d.a.createElement("h1",null,"Hello World")}}),d.a.createElement(D.a,{path:"/multTableMod12",render:I}),d.a.createElement(D.a,{path:"/tonnetz",render:x}),d.a.createElement(D.a,{path:"/vr",render:function(e){return d.a.createElement(j,Object.assign({},e,{render:z}))}}),d.a.createElement("div",{style:{background:"black",bottom:0,color:"white",position:"absolute"}},d.a.createElement(S.b,{to:"/multTableMod12"},"MultTable"),"-",d.a.createElement(S.b,{to:"/tonnetz"},"Tonnetz"),"--",d.a.createElement(S.b,{to:"/vr/coltrane"},"Coltrane Circle"),"-",d.a.createElement(S.b,{to:"/vr/dod"},"Dod")))}}]),t}(d.a.Component);P.a.render(d.a.createElement(L,null),document.querySelector("#sceneContainer"))}},[[29,1,2]]]);
//# sourceMappingURL=main.b366dfcc.chunk.js.map