{"version":3,"sources":["useMidi.js","midi.js","util.js","multTableMod12.js","tonnetz.js","color.js","pitchClass.js","coltraneCircle.js","dod.js","vr.js","index.js"],"names":["initialState","input","undefined","inputDevices","isDeviceSelectorVisible","midiIn","_","zipObject","range","fill","Array","actions","setInputDevice","store","amount","newCounterValue","state","counter","setState","setInputDevices","setMidiEvent","midiEvt","merge","toggleDeviceSelector","globalHook","React","Midi","_useMidi","useMidi","_ref","_useMidi2","Object","slicedToArray","useEffect","WebMidi","enable","err","console","error","log","inputs","window","addEventListener","_ref2","code","handleMidi","_ref3","n","note","number","vel","rawVelocity","type","defineProperty","react_default","a","createElement","Menu","id","keepMounted","open","map","_ref4","ix","name","MenuItem","key","onClick","addListener","toSymbol","10","11","MultTableMod12","Fragment","y","x","style","padding","Tonnetz","lineHeight","paddingRight","HSVtoHex","h","s","v","r","g","b","i","f","p","q","t","arguments","length","Math","floor","componentToHex","c","hex","toString","rgbToHex","round","pitchClass","_ref$position","position","_ref$scale","scale","color","opacity","radius","align","font","negate","look-at","value","ColtraneCircle","_useState","useState","_useState2","is180","setIs180","toggle","removeEventListener","midiInPitchClasses","pickBy","values","sum","dist","animation","concat","filter","sin","PI","cos","includes","_ref5","c1","c2","verts","Dod","_ref$rep","rep","sat","_ref$stack","stack","_ref$n","events","click","primitive","join","text","toConsumableArray","VR","path","match","src","react_router","component","height","rotation","theta-length","width","animation__click","property","startEvents","from","to","dur","ReactDOM","render","react_router_dom","basename","process","exact","routerProps","vr","background","bottom","midi","document","querySelector"],"mappings":"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","file":"static/js/main.a10457a2.chunk.js","sourcesContent":["import _ from 'lodash';\r\nimport React from 'react';\r\nimport globalHook from 'use-global-hook';\r\n\r\nconst initialState = {\r\n  input: undefined,\r\n  inputDevices: [],\r\n  isDeviceSelectorVisible: false,\r\n  midiIn: _.zipObject(\r\n    _.range(128),\r\n    _.fill(new Array(128), 0)),\r\n};\r\n\r\nconst actions = {\r\n  setInputDevice: (store, amount) => {\r\n    const newCounterValue = store.state.counter + amount;\r\n    store.setState({counter: newCounterValue});\r\n  },\r\n\r\n  setInputDevices: (store, inputDevices) =>\r\n    store.setState({inputDevices}),\r\n\r\n  setMidiEvent: (store, midiEvt) =>\r\n    store.setState({midiIn: _.merge(store.state.midiIn, midiEvt)}),\r\n\r\n  toggleDeviceSelector: (store) =>\r\n    store.setState({isDeviceSelectorVisible: !store.state.isDeviceSelectorVisible}),\r\n};\r\n\r\nexport default globalHook(React, initialState, actions);\r\n","import Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport React, {useEffect} from 'react';\r\nimport useMidi from './useMidi';\r\nimport WebMidi from 'webmidi';\r\n\r\nconst Midi = () => {\r\n\r\n  const [state, actions] = useMidi( // https://github.com/andregardi/use-global-hook#avoid-unnecessary-renders\r\n    ({inputDevices, isDeviceSelectorVisible}) => ({inputDevices, isDeviceSelectorVisible}),\r\n    actions => actions,\r\n  );\r\n\r\n  const {\r\n    inputDevices,\r\n    isDeviceSelectorVisible,\r\n  } = state;\r\n\r\n  useEffect(() => {\r\n    WebMidi.enable((err) => {\r\n      if (err) console.error(err);\r\n      else {\r\n        console.log('WebMidi enabled.');\r\n        actions.setInputDevices(WebMidi.inputs);\r\n      }\r\n    });\r\n\r\n    window.addEventListener('keyup', ({ code }) => {\r\n      if (code === 'Space') actions.toggleDeviceSelector();\r\n    })\r\n  }, []);\r\n\r\n\r\n  const handleMidi = ({note: {number: n}, rawVelocity: vel, type}) =>\r\n    actions.setMidiEvent({\r\n      [n]: type === 'noteon' ? vel : 0\r\n    });\r\n\r\n  return (\r\n    <Menu\r\n      id=\"simple-menu\"\r\n      // anchorEl={anchorEl}\r\n      keepMounted\r\n      open={isDeviceSelectorVisible}\r\n    >\r\n      {inputDevices.map(({name}, ix) => (\r\n        <MenuItem\r\n          key={name}\r\n          onClick={() => { // todo: remove prev listener\r\n            const input = inputDevices[ix];\r\n            actions.setInputDevice(input);\r\n            actions.toggleDeviceSelector();\r\n            input.addListener('noteon', 'all', handleMidi);\r\n            input.addListener('noteoff', 'all', handleMidi);\r\n          }}>\r\n          {name}\r\n        </MenuItem>\r\n      ))}\r\n    </Menu>\r\n  );\r\n};\r\n\r\nexport default Midi;\r\n","export const toSymbol = n => ({\r\n  10: '૪',\r\n  11: 'Ɛ',\r\n})[n % 12] || n % 12;\r\n","import _ from 'lodash';\r\nimport React from 'react';\r\nimport { toSymbol } from \"./util\";\r\n\r\nconst MultTableMod12 = () => (\r\n  <>\r\n    {_.range(6).map(n => (\r\n      <pre>\r\n        {_.range(13).map(y => (\r\n          <>\r\n            {_.range(13).map(x => (\r\n              <span key={x} style={{ padding: 3 }}>\r\n                {toSymbol(n + x * y)}\r\n              </span>\r\n            ))}\r\n            <br />\r\n          </>\r\n        ))}\r\n\r\n      </pre>\r\n    ))}\r\n  </>);\r\n\r\nexport default MultTableMod12;\r\n","import _ from 'lodash';\r\nimport React from 'react';\r\nimport { toSymbol } from \"./util\";\r\n\r\nconst Tonnetz = () => (\r\n  <pre style={{lineHeight: 3}}>\r\n\r\n    {_.range(20).map(y => (\r\n      <>\r\n        {y % 2 > 0 && (\r\n          <span style={{paddingRight: 21}}>\r\n            {' '}\r\n          </span>\r\n        )}\r\n\r\n        {_.range(30).map(x => (\r\n          <span key={x} style={{padding: 21}}>\r\n            {toSymbol(((y % 2 > 0\r\n              ? ((y - 1) / 2) * 11 + 3\r\n              : (y / 2) * 11) + x * 7))}\r\n          </span>\r\n        ))}\r\n        <br/>\r\n      </>\r\n    ))}\r\n\r\n</pre>);\r\n\r\nexport default Tonnetz;\r\n","export function HSVtoHex(h, s, v) {\r\n  function rgbToHex({ r, g, b }) {\r\n    function componentToHex(c) {\r\n      var hex = c.toString(16);\r\n      return hex.length == 1 ? \"0\" + hex : hex;\r\n    }\r\n\r\n    return \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b);\r\n  }\r\n\r\n  var r, g, b, i, f, p, q, t;\r\n  if (arguments.length === 1) {\r\n    s = h.s;\r\n    v = h.v;\r\n    h = h.h;\r\n  }\r\n  i = Math.floor(h * 6);\r\n  f = h * 6 - i;\r\n  p = v * (1 - s);\r\n  q = v * (1 - f * s);\r\n  t = v * (1 - (1 - f) * s);\r\n  switch (i % 6) {\r\n    case 0: {\r\n      r = v;\r\n      g = t;\r\n      b = p;\r\n      break;\r\n    }\r\n    case 1: {\r\n      r = q;\r\n      g = v;\r\n      b = p;\r\n      break;\r\n    }\r\n    case 2: {\r\n      r = p;\r\n      g = v;\r\n      b = t;\r\n      break;\r\n    }\r\n    case 3: {\r\n      r = p;\r\n      g = q;\r\n      b = v;\r\n      break;\r\n    }\r\n    case 4: {\r\n      r = t;\r\n      g = p;\r\n      b = v;\r\n      break;\r\n    }\r\n    case 5: {\r\n      r = v;\r\n      g = p;\r\n      b = q;\r\n      break;\r\n    }\r\n  }\r\n  return rgbToHex({\r\n    r: Math.round(r * 255),\r\n    g: Math.round(g * 255),\r\n    b: Math.round(b * 255)\r\n  });\r\n}","import React from 'react';\r\nimport { HSVtoHex } from './color';\r\nimport { toSymbol } from \"./util\";\r\n\r\n\r\nexport default ({ n, midiIn, position = \"0 0 0\", scale = \"1 1 1\" }) =>\r\n  <a-sphere\r\n    color=\"black\"\r\n    opacity={0.3}\r\n    position={position}\r\n    radius={0.15}\r\n    scale={scale}\r\n  >\r\n    <a-text\r\n      align=\"center\"\r\n      color={HSVtoHex(n / 12, 0.75, 1)}\r\n      font=\"../unifont-12.1.04-msdf.json\"\r\n      negate=\"false\"\r\n      look-at=\"#camera\"\r\n      opacity={midiIn ? 1 : 0.25}\r\n      value={toSymbol(n)}\r\n    />\r\n  </a-sphere>\r\n","import _ from 'lodash';\r\nimport PitchClass from './pitchClass';\r\nimport React, {useEffect, useState} from 'react';\r\nimport useMidi from \"./useMidi\";\r\nimport {Entity} from 'aframe-react';\r\n\r\nconst ColtraneCircle = () => {\r\n  const [is180, setIs180] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const toggle = ({key}) => {\r\n      if (key === 'r') setIs180(is180 => !is180);\r\n    };\r\n\r\n    window.addEventListener('keyup', toggle);\r\n    return () => window.removeEventListener('keyup', toggle);\r\n  }, []);\r\n\r\n  const [{midiIn}] = useMidi();\r\n\r\n  const midiInPitchClasses = _(12)\r\n    .range()\r\n    .map(n => _(midiIn)\r\n      .pickBy((v, i) => i % 12 === n)\r\n      .values()\r\n      .sum())\r\n    .value();\r\n\r\n  return (// https://www.npmjs.com/package/aframe-animation-component\r\n    <Entity animation={`property: rotation; to: 0 ${is180 ? 180 : 0} 0; dur: 500;`}>\r\n      {_(12)\r\n        .range()\r\n        .filter(n => n % 2 == 0)\r\n        .map(n => ({\r\n          n,\r\n          r: 1.5,\r\n          x: -Math.sin(n * Math.PI / 6),\r\n          y: Math.cos(n * Math.PI / 6),\r\n        }))\r\n        .map(({n, r, x, y}) => (\r\n          <PitchClass\r\n            midiIn={midiInPitchClasses[n]}\r\n            n={n}\r\n            position={`${r * x} ${r * y} 0`}\r\n          />))\r\n        .value()\r\n      }\r\n\r\n      {_(48)\r\n        .range()\r\n        .filter(n => !_.includes([6, 7, 0, 1], n % 8))\r\n        .map((n, i) => ({\r\n          i,\r\n          n: ((i + 1) * 2 + Math.floor(i / 4) * 2) % 12,\r\n          // n: (n * 2) % 12,\r\n          r: 1.5,\r\n          x: Math.sin((n + 0.5) * Math.PI / 24),\r\n          y: Math.cos((n + 0.5) * Math.PI / 24),\r\n        }))\r\n        .map(({n, r, x, y}) => (\r\n          <PitchClass\r\n            midiIn={midiInPitchClasses[n]}\r\n            n={n}\r\n            position={`${r * x} ${r * y} 0`}\r\n            scale=\"0.5 0.5 0.5\"\r\n          />))\r\n        .value()\r\n      }\r\n\r\n      {_(12)\r\n        .range()\r\n        .filter(n => n % 2 != 0)\r\n        .map(n => ({\r\n          n: (n + 6) % 12,\r\n          r: 1.2,\r\n          x: -Math.sin(n * Math.PI / 6),\r\n          y: Math.cos(n * Math.PI / 6),\r\n        }))\r\n        .map(({n, r, x, y}) => (\r\n          <PitchClass\r\n            midiIn={midiInPitchClasses[n]}\r\n            n={n}\r\n            position={`${r * x} ${r * y} 0`}\r\n          />))\r\n        .value()\r\n      }\r\n\r\n      {_(48)\r\n        .range()\r\n        .filter(n => !_.includes([4, 5, 6, 7], n % 8))\r\n        .map((n, i) => ({\r\n          i,\r\n          // n: i,\r\n          n: (i * 2 + 9 + Math.floor(i / 4) * 2) % 12,\r\n          // n: i,\r\n          r: 1.2,\r\n          x: Math.sin((n - 1.5) * Math.PI / 24),\r\n          y: Math.cos((n - 1.5) * Math.PI / 24),\r\n        }))\r\n        .map(({n, r, x, y}) => (\r\n          <PitchClass\r\n            midiIn={midiInPitchClasses[n]}\r\n            n={n}\r\n            position={`${r * x} ${r * y} 0`}\r\n            scale=\"0.5 0.5 0.5\"\r\n          />))\r\n        .value()\r\n      }\r\n    </Entity>\r\n  );\r\n};\r\n\r\nexport default ColtraneCircle;\r\n","import {Entity} from 'aframe-react';\r\nimport React from 'react';\r\nimport {HSVtoHex} from './color';\r\n\r\n// http://dmccooey.com/polyhedra/PentakisDodecahedron.txt\r\nconst c1 = 1.33058699733550141141687582919;\r\nconst c2 = 2.15293498667750705708437914596;\r\n\r\n// in ordered, opposite pairs\r\nconst verts = [\r\n  [0.0,  -c2,   c1],\r\n  [0.0,   c2,  -c1],\r\n  [ c2,  -c1,  0.0],\r\n  [-c2,   c1,  0.0],\r\n  [0.0,  -c2,  -c1],\r\n  [0.0,   c2,   c1],\r\n  [-c2,  -c1,  0.0],\r\n  [ c2,   c1,  0.0],\r\n  [-c1,  0.0,   c2],\r\n  [ c1,  0.0,  -c2],\r\n  [ c1,  0.0,   c2],\r\n  [-c1,  0.0,  -c2],\r\n];\r\n\r\nconst Dod = ({ rep = 1, sat, stack = [], n = 0 }) =>\r\n  <Entity position=\"0 0 0\">\r\n    {verts.map((v, i) =>\r\n      <Entity\r\n        key={i}\r\n        color={HSVtoHex(i * (1 / 12), sat || 1, 1)}\r\n        events={{ click: () => console.log(i) }}\r\n        primitive=\"a-sphere\"\r\n        position={v.join(' ')}\r\n        scale={[1, 1, 1].map(n => 0.3 * n/ (rep * rep)).join(' ')}\r\n      />)}\r\n\r\n    {rep < 3 && verts.map((v, i) =>\r\n      <Entity\r\n        key={i}\r\n        position={v.map(n => n * 2).join(' ')}\r\n        text={`color: ${HSVtoHex((stack.length ? stack[stack.length - 1] : i) * (1 / 12), 1, 1)}; align: center; value: ${[...stack, i].join(',')} - ${(n + i) % 12}; width: 5; zOffset: 0`}\r\n      >\r\n        <Dod rep={rep+1} sat={0.3} stack={[...stack, i]} n={(n + i) % 12} />\r\n      </Entity>)\r\n      // .filter((n, i) => i % 2)\r\n    }\r\n  </Entity>;\r\n\r\nexport default Dod;","import ColtraneCircle from \"./coltraneCircle\";\r\nimport Dod from './dod';\r\nimport React from 'react';\r\nimport {Entity, Scene} from 'aframe-react';\r\nimport {Route, Switch} from 'react-router-dom';\r\n\r\n// needs https to enter VR\r\n\r\nconst VR = ({match: {path}}) => (\r\n  <Scene>\r\n    <a-assets>\r\n      <img id=\"groundTexture\" src=\"https://cdn.aframe.io/a-painter/images/floor.jpg\"/>\r\n      <img id=\"skyTexture\" src=\"https://cdn.aframe.io/a-painter/images/sky.jpg\"/>\r\n    </a-assets>\r\n\r\n    <Switch>\r\n      <Route path={`${path}/coltrane`} component={ColtraneCircle}/>\r\n      <Route path={`${path}/dod`} component={Dod}/>\r\n    </Switch>\r\n\r\n\r\n    {/*<Entity primitive=\"a-plane\" src=\"#groundTexture\" rotation=\"-90 0 0\" height=\"100\" width=\"100\"/>*/}\r\n    {/*<Entity primitive=\"a-light\" type=\"ambient\" color=\"#445451\"/>*/}\r\n    {/*<Entity primitive=\"a-light\" type=\"point\" intensity=\"2\" position=\"2 4 4\"/>*/}\r\n\r\n    <Entity\r\n      height=\"2048\"\r\n      primitive=\"a-sky\"\r\n      radius=\"30\"\r\n      rotation=\"90 0 0\"\r\n      src=\"#skyTexture\"\r\n      theta-length=\"90\"\r\n      width=\"2048\"\r\n    />\r\n    <Entity\r\n      height=\"2048\"\r\n      primitive=\"a-sky\"\r\n      radius=\"30\"\r\n      rotation=\"90 0 180\"\r\n      src=\"#skyTexture\"\r\n      theta-length=\"90\"\r\n      width=\"2048\"\r\n    />\r\n\r\n    <Entity primitive=\"a-camera\" id=\"camera\" position=\"0 0 2\">\r\n      <Entity primitive=\"a-cursor\" animation__click={{\r\n        property: 'scale',\r\n        startEvents: 'click',\r\n        from: '0.1 0.1 0.1',\r\n        to: '1 1 1',\r\n        dur: 150,\r\n      }}/>\r\n    </Entity>\r\n  </Scene>\r\n);\r\n\r\nexport default VR;\r\n","import 'aframe';\r\n// import 'aframe-animation-component';\r\nimport 'aframe-look-at-component';\r\nimport Midi from './midi';\r\nimport MultTableMod12 from './multTableMod12';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Tonnetz from './tonnetz';\r\n\r\nimport { BrowserRouter as Router, Route, Link } from 'react-router-dom';\r\nimport VR from './vr';\r\n\r\nconst App = () => (\r\n  <Router basename={process.env.PUBLIC_URL}>\r\n    <Route path=\"/\" exact render={routerProps => (\r\n      <h1>Hello World</h1>\r\n    )} />\r\n\r\n    <Route path=\"/vr\" render={(routerProps) => <VR {...routerProps} />} />\r\n\r\n    <Route path=\"/multTableMod12\" render={MultTableMod12} />\r\n    <Route path=\"/tonnetz\" render={Tonnetz} />\r\n\r\n\r\n    <div\r\n      style={{\r\n        background: 'black',\r\n        bottom: 0,\r\n        color: 'white',\r\n        position: 'absolute',\r\n      }}>\r\n\r\n      <Link to=\"/multTableMod12\">MultTable</Link>\r\n      -\r\n      <Link to=\"/tonnetz\">Tonnetz</Link>\r\n      --\r\n      <Link to=\"/vr/coltrane\">Coltrane Circle</Link>\r\n      -\r\n      <Link to=\"/vr/dod\">Dod</Link>\r\n\r\n      <Midi />\r\n\r\n\r\n    </div>\r\n  </Router>\r\n);\r\n\r\nReactDOM.render(<App />, document.querySelector('#sceneContainer'));\r\n"],"sourceRoot":""}