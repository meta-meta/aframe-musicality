{"version":3,"sources":["color.js","dod.js","pitchClass.js","midi.js","index.js"],"names":["HSVtoHex","h","s","v","r","g","b","i","f","p","q","t","arguments","length","Math","floor","_ref","componentToHex","c","hex","toString","rgbToHex","round","pitchClass","n","midiIn","_ref$position","position","_ref$scale","scale","react_default","a","createElement","color","opacity","radius","align","look-at","value","Midi","state","_","zipObject","range","fill","Array","handleMidi","e","note","number","console","log","_this","setState","Object","objectSpread","defineProperty","type","rawVelocity","_this2","this","WebMidi","enable","err","error","inputs","addListener","_this3","midiInPitchClasses","map","pickBy","values","sum","dist","filter","x","sin","PI","y","cos","concat","includes","_ref2","_ref3","_ref4","React","Component","App","id","src","midi_Midi","height","primitive","rotation","theta-length","width","animation__click","property","startEvents","from","to","dur","ReactDOM","render","src_App","document","querySelector"],"mappings":"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","file":"static/js/main.6fc4813c.chunk.js","sourcesContent":["export function HSVtoHex(h, s, v) {\n  function rgbToHex({ r, g, b }) {\n    function componentToHex(c) {\n      var hex = c.toString(16);\n      return hex.length == 1 ? \"0\" + hex : hex;\n    }\n\n    return \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b);\n  }\n\n  var r, g, b, i, f, p, q, t;\n  if (arguments.length === 1) {\n    s = h.s;\n    v = h.v;\n    h = h.h;\n  }\n  i = Math.floor(h * 6);\n  f = h * 6 - i;\n  p = v * (1 - s);\n  q = v * (1 - f * s);\n  t = v * (1 - (1 - f) * s);\n  switch (i % 6) {\n    case 0: {\n      r = v;\n      g = t;\n      b = p;\n      break;\n    }\n    case 1: {\n      r = q;\n      g = v;\n      b = p;\n      break;\n    }\n    case 2: {\n      r = p;\n      g = v;\n      b = t;\n      break;\n    }\n    case 3: {\n      r = p;\n      g = q;\n      b = v;\n      break;\n    }\n    case 4: {\n      r = t;\n      g = p;\n      b = v;\n      break;\n    }\n    case 5: {\n      r = v;\n      g = p;\n      b = q;\n      break;\n    }\n  }\n  return rgbToHex({\n    r: Math.round(r * 255),\n    g: Math.round(g * 255),\n    b: Math.round(b * 255)\n  });\n}","import {Entity} from 'aframe-react';\nimport React from 'react';\nimport {HSVtoHex} from './color';\n\n// http://dmccooey.com/polyhedra/PentakisDodecahedron.txt\nconst c1 = 1.33058699733550141141687582919;\nconst c2 = 2.15293498667750705708437914596;\n\n// in ordered, opposite pairs\nconst verts = [\n  [0.0,  -c2,   c1],\n  [0.0,   c2,  -c1],\n  [ c2,  -c1,  0.0],\n  [-c2,   c1,  0.0],\n  [0.0,  -c2,  -c1],\n  [0.0,   c2,   c1],\n  [-c2,  -c1,  0.0],\n  [ c2,   c1,  0.0],\n  [-c1,  0.0,   c2],\n  [ c1,  0.0,  -c2],\n  [ c1,  0.0,   c2],\n  [-c1,  0.0,  -c2],\n];\n\nconst Dod = ({ rep = 1, sat, stack = [], n = 0 }) =>\n  <Entity position=\"0 0 0\">\n    {verts.map((v, i) =>\n      <Entity\n        key={i}\n        color={HSVtoHex(i * (1 / 12), sat || 1, 1)}\n        events={{ click: () => console.log(i) }}\n        primitive=\"a-sphere\"\n        position={v.join(' ')}\n        scale={[1, 1, 1].map(n => 0.3 * n/ (rep * rep)).join(' ')}\n      />)}\n\n    {rep < 3 && verts.map((v, i) =>\n      <Entity\n        key={i}\n        position={v.map(n => n * 2).join(' ')}\n        text={`color: ${HSVtoHex((stack.length ? stack[stack.length - 1] : i) * (1 / 12), 1, 1)}; align: center; value: ${[...stack, i].join(',')} - ${(n + i) % 12}; width: 5; zOffset: 0`}\n      >\n        <Dod rep={rep+1} sat={0.3} stack={[...stack, i]} n={(n + i) % 12} />\n      </Entity>)\n      // .filter((n, i) => i % 2)\n    }\n  </Entity>;\n\nexport default Dod;","import React from 'react';\nimport { HSVtoHex } from './color';\n\n\n\nexport default ({ n, midiIn, position = \"0 0 0\", scale = \"1 1 1\" }) =>\n  <a-sphere\n    color=\"black\"\n    opacity={0.3}\n    position={position}\n    radius={0.15}\n    scale={scale}\n  >\n    <a-text\n      align=\"center\"\n      color={HSVtoHex(n / 12, 1, 1)}\n      look-at=\"#camera\"\n      opacity={midiIn ? 1 : 0.25}\n      value={n}\n    />\n  </a-sphere>","import _ from 'lodash';\nimport PitchClass from './pitchClass';\nimport React from 'react';\nimport WebMidi from 'webmidi';\nimport { Entity } from 'aframe-react';\n\nexport default class Midi extends React.Component {\n  state = {\n    midiIn: _.zipObject(\n      _.range(128),\n      _.fill(new Array(128), 0)),\n  }\n\n  componentDidMount() {\n    WebMidi.enable((err) => {\n      if (err) console.error(err);\n      else console.log('WebMidi enabled.');\n\n      console.log(WebMidi.inputs);\n      if (WebMidi.inputs[0]) {\n        WebMidi.inputs[0].addListener('noteon', 'all', this.handleMidi);\n        WebMidi.inputs[0].addListener('noteoff', 'all', this.handleMidi);\n      }\n    });\n  }\n\n  handleMidi = (e) => {\n    const n = e.note.number;\n    console.log(n)\n    this.setState({\n      midiIn: {\n        ...this.state.midiIn,\n        [n]: e.type === 'noteon' ? e.rawVelocity : 0\n      }\n    })\n  };\n\n  render() {\n\n    const midiInPitchClasses = _(12)\n      .range()\n      .map(n => _(this.state.midiIn)\n        .pickBy((v, i) => i % 12 === n)\n        .values()\n        .sum())\n      .value();\n\n    return (\n      <Entity>\n        {_(12)\n          .range()\n          .filter(n => n % 2 == 0)\n          .map(n => ({\n            n,\n            r: 1.5,\n            x: -Math.sin(n * Math.PI / 6),\n            y: Math.cos(n * Math.PI / 6),\n          }))\n          .map(({ n, r, x, y }) => (\n            <PitchClass\n              midiIn={midiInPitchClasses[n]}\n              n={n}\n              position={`${r * x} ${r * y} 0`}\n            />))\n          .value()\n        }\n\n        {_(48)\n          .range()\n          .filter(n => !_.includes([6, 7, 0, 1], n % 8))\n          .map((n, i) => ({\n            i,\n            n: ((i + 1) * 2 + Math.floor(i / 4) * 2) % 12,\n            // n: (n * 2) % 12,\n            r: 1.5,\n            x: Math.sin((n + 0.5) * Math.PI / 24),\n            y: Math.cos((n + 0.5) * Math.PI / 24),\n          }))\n          .map(({ n, r, x, y }) => (\n            <PitchClass\n              midiIn={midiInPitchClasses[n]}\n              n={n}\n              position={`${r * x} ${r * y} 0`}\n              scale=\"0.5 0.5 0.5\"\n            />))\n          .value()\n        }\n\n        {_(12)\n          .range()\n          .filter(n => n % 2 != 0)\n          .map(n => ({\n            n: (n + 6) % 12,\n            r: 1.2,\n            x: -Math.sin(n * Math.PI / 6),\n            y: Math.cos(n * Math.PI / 6),\n          }))\n          .map(({ n, r, x, y }) => (\n            <PitchClass\n              midiIn={midiInPitchClasses[n]}\n              n={n}\n              position={`${r * x} ${r * y} 0`}\n            />))\n          .value()\n        }\n\n        {_(48)\n          .range()\n          .filter(n => !_.includes([4, 5, 6, 7], n % 8))\n          .map((n, i) => ({\n            i,\n            // n: i,\n            n: (i * 2 + 9 + Math.floor(i / 4) * 2) % 12,\n            // n: i,\n            r: 1.2,\n            x: Math.sin((n - 1.5) * Math.PI / 24),\n            y: Math.cos((n - 1.5) * Math.PI / 24),\n          }))\n          .map(({ n, r, x, y }) => (\n            <PitchClass\n              midiIn={midiInPitchClasses[n]}\n              n={n}\n              position={`${r * x} ${r * y} 0`}\n              scale=\"0.5 0.5 0.5\"\n            />))\n          .value()\n        }\n      </Entity>\n    );\n  }\n}","import 'aframe';\n// import 'aframe-animation-component';\n// import 'aframe-particle-system-component';\nimport 'aframe-look-at-component';\nimport _ from 'lodash';\nimport Dod from './dod';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Entity, Scene } from 'aframe-react';\nimport Midi from './midi';\n\nclass App extends React.Component {\n  render() {\n\n    return (\n      <Scene>\n        <a-assets>\n          <img id=\"groundTexture\" src=\"https://cdn.aframe.io/a-painter/images/floor.jpg\" />\n          <img id=\"skyTexture\" src=\"https://cdn.aframe.io/a-painter/images/sky.jpg\" />\n        </a-assets>\n\n        {/*<Dod/>*/}\n\n\n        <Midi/>\n\n\n        {/*<Entity primitive=\"a-plane\" src=\"#groundTexture\" rotation=\"-90 0 0\" height=\"100\" width=\"100\"/>*/}\n        {/*<Entity primitive=\"a-light\" type=\"ambient\" color=\"#445451\"/>*/}\n        {/*<Entity primitive=\"a-light\" type=\"point\" intensity=\"2\" position=\"2 4 4\"/>*/}\n        <Entity\n          height=\"2048\"\n          primitive=\"a-sky\"\n          radius=\"30\"\n          rotation=\"90 0 0\"\n          src=\"#skyTexture\"\n          theta-length=\"90\"\n          width=\"2048\"\n        />\n        <Entity\n          height=\"2048\"\n          primitive=\"a-sky\"\n          radius=\"30\"\n          rotation=\"90 0 180\"\n          src=\"#skyTexture\"\n          theta-length=\"90\"\n          width=\"2048\"\n        />\n        {/*<Entity particle-system={{preset: 'snow', particleCount: 2000}}/>*/}\n        {/*<Entity text={{value: 'Hello, A-Frame React!', align: 'center'}} position={{x: 0, y: 2, z: -1}}/>*/}\n\n        {/*<Entity id=\"box\"*/}\n        {/*geometry={{primitive: 'box'}}*/}\n        {/*material={{color: this.state.color, opacity: 0.6}}*/}\n        {/*animation__rotate={{property: 'rotation', dur: 2000, loop: true, to: '360 360 360'}}*/}\n        {/*animation__scale={{property: 'scale', dir: 'alternate', dur: 100, loop: true, to: '1.1 1.1 1.1'}}*/}\n        {/*position={{x: 0, y: 1, z: -3}}*/}\n        {/*events={{click: this.changeColor.bind(this)}}>*/}\n        {/*<Entity animation__scale={{property: 'scale', dir: 'alternate', dur: 100, loop: true, to: '2 2 2'}}*/}\n        {/*geometry={{primitive: 'box', depth: 0.2, height: 0.2, width: 0.2}}*/}\n        {/*material={{color: '#24CAFF'}}/>*/}\n        {/*</Entity>*/}\n\n\n        <Entity primitive=\"a-camera\" id=\"camera\" position=\"0 0 2\">\n          <Entity primitive=\"a-cursor\" animation__click={{\n            property: 'scale',\n            startEvents: 'click',\n            from: '0.1 0.1 0.1',\n            to: '1 1 1',\n            dur: 150\n          }} />\n        </Entity>\n      </Scene>\n    );\n  }\n}\n\nReactDOM.render(<App />, document.querySelector('#sceneContainer'));\n"],"sourceRoot":""}