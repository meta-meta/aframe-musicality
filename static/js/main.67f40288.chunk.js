(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{44:function(e,t,n){e.exports=n(56)},56:function(e,t,n){"use strict";n.r(t);n(45),n(46);var a=n(28),r=n(20),i=n(79),c=n(80),o=n(0),u=n.n(o),l=n(6),s=n.n(l),m=n(40),p={input:void 0,inputDevices:[],isDeviceSelectorVisible:!1,midiIn:s.a.zipObject(s.a.range(128),s.a.fill(new Array(128),0))},f={setInputDevice:function(e,t){var n=e.state.counter+t;e.setState({counter:n})},setInputDevices:function(e,t){return e.setState({inputDevices:t})},setMidiEvent:function(e,t){return e.setState({midiIn:s.a.merge(e.state.midiIn,t)})},toggleDeviceSelector:function(e){return e.setState({isDeviceSelectorVisible:!e.state.isDeviceSelectorVisible})}},d=Object(m.a)(u.a,p,f),v=n(34),E=n.n(v),h=function(){var e=d(function(e){return{inputDevices:e.inputDevices,isDeviceSelectorVisible:e.isDeviceSelectorVisible}},function(e){return e}),t=Object(r.a)(e,2),n=t[0],l=t[1],s=n.inputDevices,m=n.isDeviceSelectorVisible;Object(o.useEffect)(function(){E.a.enable(function(e){e?console.error(e):(console.log("WebMidi enabled."),l.setInputDevices(E.a.inputs))}),window.addEventListener("keyup",function(e){"Space"===e.code&&l.toggleDeviceSelector()})},[]);var p=function(e){var t=e.note.number,n=e.rawVelocity,r=e.type;return l.setMidiEvent(Object(a.a)({},t,"noteon"===r?n:0))};return u.a.createElement(i.a,{id:"simple-menu",keepMounted:!0,open:m},s.map(function(e,t){var n=e.name;return u.a.createElement(c.a,{key:n,onClick:function(){var e=s[t];l.setInputDevice(e),l.toggleDeviceSelector(),e.addListener("noteon","all",p),e.addListener("noteoff","all",p)}},n)}))},g=function(e){return{10:"\u0aea",11:"\u0190"}[e%12]||e%12},y=function(){return u.a.createElement(u.a.Fragment,null,s.a.range(6).map(function(e){return u.a.createElement("pre",null,s.a.range(13).map(function(t){return u.a.createElement(u.a.Fragment,null,s.a.range(13).map(function(n){return u.a.createElement("span",{key:n,style:{padding:3}},g(e+n*t))}),u.a.createElement("br",null))}))}))},b=n(4),k=n.n(b),M=function(){return u.a.createElement("pre",{style:{lineHeight:3}},s.a.range(20).map(function(e){return u.a.createElement(u.a.Fragment,null,e%2>0&&u.a.createElement("span",{style:{paddingRight:21}}," "),s.a.range(30).map(function(t){return u.a.createElement("span",{key:t,style:{padding:21}},g((e%2>0?(e-1)/2*11+3:e/2*11)+7*t))}),u.a.createElement("br",null))}))},I=n(22),w=n(17);function D(e,t,n){var a,r,i,c,o,u,l,s;switch(1===arguments.length&&(t=e.s,n=e.v,e=e.h),u=n*(1-t),l=n*(1-(o=6*e-(c=Math.floor(6*e)))*t),s=n*(1-(1-o)*t),c%6){case 0:a=n,r=s,i=u;break;case 1:a=l,r=n,i=u;break;case 2:a=u,r=n,i=s;break;case 3:a=u,r=l,i=n;break;case 4:a=s,r=u,i=n;break;case 5:a=n,r=u,i=l}return function(e){var t=e.r,n=e.g,a=e.b;function r(e){var t=e.toString(16);return 1==t.length?"0"+t:t}return"#"+r(t)+r(n)+r(a)}({r:Math.round(255*a),g:Math.round(255*r),b:Math.round(255*i)})}var j=function(e){var t=e.n,n=e.midiIn,a=e.position,r=void 0===a?"0 0 0":a,i=e.scale,c=void 0===i?"1 1 1":i;return u.a.createElement("a-sphere",{color:"black",opacity:.3,position:r,radius:.15,scale:c},u.a.createElement("a-text",{align:"center",color:D(t/12,.75,1),font:"../unifont-12.1.04-msdf.json",negate:"false","look-at":"#camera",opacity:n?1:.25,value:g(t)}))},S=n(11),x=function(){var e=Object(o.useState)(!0),t=Object(r.a)(e,2),n=t[0],a=t[1];Object(o.useEffect)(function(){var e=function(e){"r"===e.key&&a(function(e){return!e})};return window.addEventListener("keyup",e),function(){return window.removeEventListener("keyup",e)}},[]);var i=d(),c=Object(r.a)(i,1)[0].midiIn,l=s()(12).range().map(function(e){return s()(c).pickBy(function(t,n){return n%12===e}).values().sum()}).value();return u.a.createElement(S.Entity,{animation:"property: rotation; to: 0 ".concat(n?180:0," 0; dur: 500;")},s()(12).range().filter(function(e){return e%2==0}).map(function(e){return{n:e,r:1.5,x:-Math.sin(e*Math.PI/6),y:Math.cos(e*Math.PI/6)}}).map(function(e){var t=e.n,n=e.r,a=e.x,r=e.y;return u.a.createElement(j,{midiIn:l[t],n:t,position:"".concat(n*a," ").concat(n*r," 0")})}).value(),s()(48).range().filter(function(e){return!s.a.includes([6,7,0,1],e%8)}).map(function(e,t){return{i:t,n:(2*(t+1)+2*Math.floor(t/4))%12,r:1.5,x:Math.sin((e+.5)*Math.PI/24),y:Math.cos((e+.5)*Math.PI/24)}}).map(function(e){var t=e.n,n=e.r,a=e.x,r=e.y;return u.a.createElement(j,{midiIn:l[t],n:t,position:"".concat(n*a," ").concat(n*r," 0"),scale:"0.5 0.5 0.5"})}).value(),s()(12).range().filter(function(e){return e%2!=0}).map(function(e){return{n:(e+6)%12,r:1.2,x:-Math.sin(e*Math.PI/6),y:Math.cos(e*Math.PI/6)}}).map(function(e){var t=e.n,n=e.r,a=e.x,r=e.y;return u.a.createElement(j,{midiIn:l[t],n:t,position:"".concat(n*a," ").concat(n*r," 0")})}).value(),s()(48).range().filter(function(e){return!s.a.includes([4,5,6,7],e%8)}).map(function(e,t){return{i:t,n:(2*t+9+2*Math.floor(t/4))%12,r:1.2,x:Math.sin((e-1.5)*Math.PI/24),y:Math.cos((e-1.5)*Math.PI/24)}}).map(function(e){var t=e.n,n=e.r,a=e.x,r=e.y;return u.a.createElement(j,{midiIn:l[t],n:t,position:"".concat(n*a," ").concat(n*r," 0"),scale:"0.5 0.5 0.5"})}).value())},O=n(37),P=1.3305869973355013,T=2.152934986677507,V=[[0,-T,P],[0,T,-P],[T,-P,0],[-T,P,0],[0,-T,-P],[0,T,P],[-T,-P,0],[T,P,0],[-P,0,T],[P,0,-T],[P,0,T],[-P,0,-T]],z=function e(t){var n=t.rep,a=void 0===n?1:n,r=t.sat,i=t.stack,c=void 0===i?[]:i,o=t.n,l=void 0===o?0:o;return u.a.createElement(S.Entity,{position:"0 0 0"},V.map(function(e,t){return u.a.createElement(S.Entity,{key:t,color:D(t*(1/12),r||1,1),events:{click:function(){return console.log(t)}},primitive:"a-sphere",position:e.join(" "),scale:[1,1,1].map(function(e){return.3*e/(a*a)}).join(" ")})}),a<3&&V.map(function(t,n){return u.a.createElement(S.Entity,{key:n,position:t.map(function(e){return 2*e}).join(" "),text:"color: ".concat(D((c.length?c[c.length-1]:n)*(1/12),1,1),"; align: center; value: ").concat([].concat(Object(O.a)(c),[n]).join(",")," - ").concat((l+n)%12,"; width: 5; zOffset: 0")},u.a.createElement(e,{rep:a+1,sat:.3,stack:[].concat(Object(O.a)(c),[n]),n:(l+n)%12}))}))},L=function(e){var t=e.match.path;return u.a.createElement(S.Scene,null,u.a.createElement("a-assets",null,u.a.createElement("img",{id:"groundTexture",src:"https://cdn.aframe.io/a-painter/images/floor.jpg"}),u.a.createElement("img",{id:"skyTexture",src:"https://cdn.aframe.io/a-painter/images/sky.jpg"})),u.a.createElement(w.c,null,u.a.createElement(w.a,{path:"".concat(t,"/coltrane"),component:x}),u.a.createElement(w.a,{path:"".concat(t,"/dod"),component:z})),u.a.createElement(S.Entity,{height:"2048",primitive:"a-sky",radius:"30",rotation:"90 0 0",src:"#skyTexture","theta-length":"90",width:"2048"}),u.a.createElement(S.Entity,{height:"2048",primitive:"a-sky",radius:"30",rotation:"90 0 180",src:"#skyTexture","theta-length":"90",width:"2048"}),u.a.createElement(S.Entity,{primitive:"a-camera",id:"camera",position:"0 0 2"},u.a.createElement(S.Entity,{primitive:"a-cursor",animation__click:{property:"scale",startEvents:"click",from:"0.1 0.1 0.1",to:"1 1 1",dur:150}})))};k.a.render(u.a.createElement(function(){return u.a.createElement(I.a,{basename:"/aframe-musicality"},u.a.createElement(w.a,{path:"/",exact:!0,render:function(e){return u.a.createElement("h1",null,"Hello World")}}),u.a.createElement(w.a,{path:"/vr",render:function(e){return u.a.createElement(L,e)}}),u.a.createElement(w.a,{path:"/multTableMod12",render:y}),u.a.createElement(w.a,{path:"/tonnetz",render:M}),u.a.createElement("div",{style:{background:"black",bottom:0,color:"white",position:"absolute"}},u.a.createElement(I.b,{to:"/multTableMod12"},"MultTable"),"-",u.a.createElement(I.b,{to:"/tonnetz"},"Tonnetz"),"--",u.a.createElement(I.b,{to:"/vr/coltrane"},"Coltrane Circle"),"-",u.a.createElement(I.b,{to:"/vr/dod"},"Dod"),u.a.createElement(h,null)))},null),document.querySelector("#sceneContainer"))}},[[44,1,2]]]);
//# sourceMappingURL=main.67f40288.chunk.js.map