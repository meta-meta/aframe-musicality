(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{54:function(e,t,n){e.exports=n(70)},70:function(e,t,n){"use strict";n.r(t);var a=n(44),r=(n(55),n(56),n(30)),c=n(21),i=n(93),o=n(94),u=n(0),l=n.n(u),s=n(6),m=n.n(s),p=n(45),d={input:void 0,inputDevices:[],isDeviceSelectorVisible:!1,midiIn:m.a.zipObject(m.a.range(128),m.a.fill(new Array(128),0))},f={setInputDevice:function(e,t){var n=e.state.counter+t;e.setState({counter:n})},setInputDevices:function(e,t){return e.setState({inputDevices:t})},setMidiEvent:function(e,t){return e.setState({midiIn:m.a.merge(e.state.midiIn,t)})},toggleDeviceSelector:function(e){return e.setState({isDeviceSelectorVisible:!e.state.isDeviceSelectorVisible})}},v=Object(p.a)(l.a,d,f),E=n(36),h=n.n(E),y=function(){var e=v(function(e){return{inputDevices:e.inputDevices,isDeviceSelectorVisible:e.isDeviceSelectorVisible}},function(e){return e}),t=Object(c.a)(e,2),n=t[0],a=t[1],s=n.inputDevices,m=n.isDeviceSelectorVisible;Object(u.useEffect)(function(){h.a.enable(function(e){e?console.error(e):(console.log("WebMidi enabled."),a.setInputDevices(h.a.inputs))}),window.addEventListener("keyup",function(e){"Space"===e.code&&a.toggleDeviceSelector()})},[]);var p=function(e){var t=e.note.number,n=e.rawVelocity,c=e.type;return a.setMidiEvent(Object(r.a)({},t,"noteon"===c?n:0))};return l.a.createElement(i.a,{id:"simple-menu",keepMounted:!0,open:m},s.map(function(e,t){var n=e.name;return l.a.createElement(o.a,{key:n,onClick:function(){var e=s[t];a.setInputDevice(e),a.toggleDeviceSelector(),e.addListener("noteon","all",p),e.addListener("noteoff","all",p)}},n)}))},g=function(e){return{10:"\u0aea",11:"\u0190"}[e%12]||e%12},b=function(){return l.a.createElement(l.a.Fragment,null,m.a.range(6).map(function(e){return l.a.createElement("pre",null,m.a.range(13).map(function(t){return l.a.createElement(l.a.Fragment,null,m.a.range(13).map(function(n){return l.a.createElement("span",{key:n,style:{padding:3}},g(e+n*t))}),l.a.createElement("br",null))}))}))},k=n(46),M=n(47),w=n(51),j=n(48),D=n(49),I=function(e){function t(){var e,n;Object(k.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(w.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).state={text:""},n.handleKeyPress=function(e){var t={Numpad0:"0",Numpad1:"1",Numpad2:"2",Numpad3:"3",Numpad4:"4",Numpad5:"5",Numpad6:"6",Numpad7:"7",Numpad8:"8",Numpad9:"9",NumpadDivide:"\u0aea",NumpadMultiply:"\u0190",NumpadDecimal:" ",NumpadEnter:"\n"}[e.code];t&&n.setState({text:n.state.text+t})},n}return Object(D.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keypress",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keypress",this.handleKeyPress)}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h3",null,"Use the numpad to enter pitch classes"),l.a.createElement("pre",null,this.state.text))}}]),t}(u.Component),x=n(4),O=n.n(x),S=function(){return l.a.createElement("pre",{style:{lineHeight:3}},m.a.range(20).map(function(e){return l.a.createElement(l.a.Fragment,null,e%2>0&&l.a.createElement("span",{style:{paddingRight:21}}," "),m.a.range(30).map(function(t){return l.a.createElement("span",{key:t,style:{padding:21}},g((e%2>0?(e-1)/2*11+3:e/2*11)+7*t))}),l.a.createElement("br",null))}))},N=n(37),P=n.n(N),T=n(18),L=n(17);function V(e,t,n){var a,r,c,i,o,u,l,s;switch(1===arguments.length&&(t=e.s,n=e.v,e=e.h),u=n*(1-t),l=n*(1-(o=6*e-(i=Math.floor(6*e)))*t),s=n*(1-(1-o)*t),i%6){case 0:a=n,r=s,c=u;break;case 1:a=l,r=n,c=u;break;case 2:a=u,r=n,c=s;break;case 3:a=u,r=l,c=n;break;case 4:a=s,r=u,c=n;break;case 5:a=n,r=u,c=l}return function(e){var t=e.r,n=e.g,a=e.b;function r(e){var t=e.toString(16);return 1==t.length?"0"+t:t}return"#"+r(t)+r(n)+r(a)}({r:Math.round(255*a),g:Math.round(255*r),b:Math.round(255*c)})}var z=function(e){var t=e.n,n=e.midiIn,a=e.position,r=void 0===a?"0 0 0":a,c=e.scale,i=void 0===c?"1 1 1":c;return l.a.createElement("a-sphere",{color:"black",opacity:.3,position:r,radius:.15,scale:i},l.a.createElement("a-text",{align:"center",color:V(t/12,.75,1),font:"../unifont-12.1.04-msdf.json",negate:"false","look-at":"#camera",opacity:n?1:.25,value:g(t)}))},C=n(11),A=function(){var e=Object(u.useState)(!0),t=Object(c.a)(e,2),n=t[0],a=t[1];Object(u.useEffect)(function(){var e=function(e){"r"===e.key&&a(function(e){return!e})};return window.addEventListener("keyup",e),function(){return window.removeEventListener("keyup",e)}},[]);var r=v(),i=Object(c.a)(r,1)[0].midiIn,o=m()(12).range().map(function(e){return m()(i).pickBy(function(t,n){return n%12===e}).values().sum()}).value();return l.a.createElement(C.Entity,{animation:"property: rotation; to: 0 ".concat(n?180:0," 0; dur: 500;")},m()(12).range().filter(function(e){return e%2==0}).map(function(e){return{n:e,r:1.5,x:-Math.sin(e*Math.PI/6),y:Math.cos(e*Math.PI/6)}}).map(function(e){var t=e.n,n=e.r,a=e.x,r=e.y;return l.a.createElement(z,{midiIn:o[t],n:t,position:"".concat(n*a," ").concat(n*r," 0")})}).value(),m()(48).range().filter(function(e){return!m.a.includes([6,7,0,1],e%8)}).map(function(e,t){return{i:t,n:(2*(t+1)+2*Math.floor(t/4))%12,r:1.5,x:Math.sin((e+.5)*Math.PI/24),y:Math.cos((e+.5)*Math.PI/24)}}).map(function(e){var t=e.n,n=e.r,a=e.x,r=e.y;return l.a.createElement(z,{midiIn:o[t],n:t,position:"".concat(n*a," ").concat(n*r," 0"),scale:"0.5 0.5 0.5"})}).value(),m()(12).range().filter(function(e){return e%2!=0}).map(function(e){return{n:(e+6)%12,r:1.2,x:-Math.sin(e*Math.PI/6),y:Math.cos(e*Math.PI/6)}}).map(function(e){var t=e.n,n=e.r,a=e.x,r=e.y;return l.a.createElement(z,{midiIn:o[t],n:t,position:"".concat(n*a," ").concat(n*r," 0")})}).value(),m()(48).range().filter(function(e){return!m.a.includes([4,5,6,7],e%8)}).map(function(e,t){return{i:t,n:(2*t+9+2*Math.floor(t/4))%12,r:1.2,x:Math.sin((e-1.5)*Math.PI/24),y:Math.cos((e-1.5)*Math.PI/24)}}).map(function(e){var t=e.n,n=e.r,a=e.x,r=e.y;return l.a.createElement(z,{midiIn:o[t],n:t,position:"".concat(n*a," ").concat(n*r," 0"),scale:"0.5 0.5 0.5"})}).value())},F=n(40),K=1.3305869973355013,W=2.152934986677507,H=[[0,-W,K],[0,W,-K],[W,-K,0],[-W,K,0],[0,-W,-K],[0,W,K],[-W,-K,0],[W,K,0],[-K,0,W],[K,0,-W],[K,0,W],[-K,0,-W]],J=function e(t){var n=t.rep,a=void 0===n?1:n,r=t.sat,c=t.stack,i=void 0===c?[]:c,o=t.n,u=void 0===o?0:o;return l.a.createElement(C.Entity,{position:"0 0 0"},H.map(function(e,t){return l.a.createElement(C.Entity,{key:t,color:V(t*(1/12),r||1,1),events:{click:function(){return console.log(t)}},primitive:"a-sphere",position:e.join(" "),scale:[1,1,1].map(function(e){return.3*e/(a*a)}).join(" ")})}),a<3&&H.map(function(t,n){return l.a.createElement(C.Entity,{key:n,position:t.map(function(e){return 2*e}).join(" "),text:"color: ".concat(V((i.length?i[i.length-1]:n)*(1/12),1,1),"; align: center; value: ").concat([].concat(Object(F.a)(i),[n]).join(",")," - ").concat((u+n)%12,"; width: 5; zOffset: 0")},l.a.createElement(e,{rep:a+1,sat:.3,stack:[].concat(Object(F.a)(i),[n]),n:(u+n)%12}))}))},U=function(e){var t=e.match.path;return l.a.createElement(C.Scene,null,l.a.createElement("a-assets",null,l.a.createElement("img",{id:"groundTexture",src:"https://cdn.aframe.io/a-painter/images/floor.jpg"}),l.a.createElement("img",{id:"skyTexture",src:"https://cdn.aframe.io/a-painter/images/sky.jpg"})),l.a.createElement(L.c,null,l.a.createElement(L.a,{path:"".concat(t,"/coltrane"),component:A}),l.a.createElement(L.a,{path:"".concat(t,"/dod"),component:J})),l.a.createElement(C.Entity,{height:"2048",primitive:"a-sky",radius:"30",rotation:"90 0 0",src:"#skyTexture","theta-length":"90",width:"2048"}),l.a.createElement(C.Entity,{height:"2048",primitive:"a-sky",radius:"30",rotation:"90 0 180",src:"#skyTexture","theta-length":"90",width:"2048"}),l.a.createElement(C.Entity,{primitive:"a-camera",id:"camera",position:"0 0 2"},l.a.createElement(C.Entity,{primitive:"a-cursor",animation__click:{property:"scale",startEvents:"click",from:"0.1 0.1 0.1",to:"1 1 1",dur:150}})))};O.a.render(l.a.createElement(function(){return l.a.createElement(T.a,{basename:"/aframe-musicality"},l.a.createElement(L.a,{path:"/",exact:!0,render:function(e){return l.a.createElement("h1",null,"Hello World")}}),l.a.createElement(L.a,{path:"/vr",render:function(e){return l.a.createElement(U,e)}}),l.a.createElement(L.a,{path:"/multTableMod12",render:b}),l.a.createElement(L.a,{path:"/numpadMod12",render:function(){return l.a.createElement(I,null)}}),l.a.createElement(L.a,{path:"/tonnetz",render:S}),l.a.createElement("div",{style:{background:"black",bottom:0,color:"white",position:"absolute"}},l.a.createElement(T.b,{to:"/numpadMod12"},"Numpad"),"-",l.a.createElement(T.b,{to:"/multTableMod12"},"MultTable"),"-",l.a.createElement(T.b,{to:"/tonnetz"},"Tonnetz"),"--",l.a.createElement(T.b,{to:"/vr/coltrane"},"Coltrane Circle"),"-",l.a.createElement(T.b,{to:"/vr/dod"},"Dod"),l.a.createElement(y,null)))},null),document.querySelector("#sceneContainer"));var _=new P.a;_.open(),window.osc=_,window.sendOsc=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return _.send(Object(a.a)(P.a.Message,[e].concat(n)))}}},[[54,1,2]]]);
//# sourceMappingURL=main.4171f785.chunk.js.map