(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{119:function(e,t,n){e.exports=n(150)},149:function(e,t){},150:function(e,t,n){"use strict";n.r(t);var a=n(9),r=(n(120),n(123),n(7)),i=n.n(r),o=n(0),c=n.n(o),l=n(14),s=Object(l.a)({root:{fontSize:20,fontFamily:"jetBrainsMono",display:"inline-flex",height:30,width:30,alignItems:"center",justifyContent:"center"},odd:{left:15,position:"relative"}})(function(e){var t=e.children,n=e.classes,a=e.className,r=void 0===a?"":a,i=e.isOdd,o=e.style;return c.a.createElement("div",{className:"".concat(n.root," ").concat(r," ").concat(i?n.odd:""),style:o},t)}),u=Object(l.a)({fretMarker:{color:"purple"}})(function(e){var t=e.classes.fretMarker,n=e.frets;return i.a.range(i.a.last(n)+1).map(function(e){return i.a.includes(n,e)?e:""}).map(function(e,n){return c.a.createElement(s,{className:t,key:n},e)})}),d=function(e){return{10:"\u0aea",11:"\u0190"}[e%12]||e%12},m=function(e){e.classes;var t=e.n,n=e.isOdd,a=e.style;return c.a.createElement(s,{isOdd:n,style:a},d(t))},h=[1,3,5,7,10,12,15,17,19],f=function(){return c.a.createElement("div",{style:{display:"block",flexShrink:0}},c.a.createElement(u,{frets:h}),c.a.createElement("br",null),[0,9,5,0,0].map(function(e,t){return c.a.createElement(c.a.Fragment,{key:t},i.a.range(23).map(function(t){return(t+e)%12}).map(function(e,n){return 4===t&&n<5?c.a.createElement(s,{key:n}):c.a.createElement(m,{key:n,n:e})}),c.a.createElement("br",null))}),c.a.createElement(u,{frets:h}))},p=n(189),v=n(16),g=function(e){var t=e.fretCount,n=e.fretMarkers,a=e.tuning;return c.a.createElement("div",{style:{display:"block",flexShrink:0}},c.a.createElement(u,{frets:n}),c.a.createElement("br",null),Object(v.a)(a).reverse().map(function(e,n){return c.a.createElement(c.a.Fragment,{key:n},i.a.range(t+1).map(function(t){return(t+e)%12}).map(function(e,t){return c.a.createElement(m,{key:t,n:e})}),c.a.createElement("br",null))}),c.a.createElement(u,{frets:n}))},y=[4,9,2,7,11,4],k=function(){return c.a.createElement(g,{fretCount:24,fretMarkers:[0,5,7,12,15,17,19,24],tuning:y})},b=function(){return c.a.createElement("div",{style:{height:"100%",overflowY:"auto",padding:"20% 10%"}},c.a.createElement("h1",null,"What is this nonsense all about?"),c.a.createElement("p",null,'When I learned how to play an instrument, we started with "Hot Cross Buns", "Mary Had a Little Lamb", etc. We started with the first 3 notes in the key of "C". Eventually, we\'d build up to the other 4 notes. Then a new key was introduced. This one has a "Bb" -- the key of "F". At some point we\'d be introduced to an "accidental".'),c.a.createElement("p",null,'This left a lasting impression that the notes C, D, E, F, G, A, and B were the main notes. And these other things were in another class. They were harder -- harder to think about, harder to play, harder to keep track of, harder to say. C, D, E, F, G, A, and B are all single syllables. The other 5 notes were thought of as modifications of these main notes. "B flat", "C sharp", "D flat", yada yada. Wait are there 5 or are there 10?'),c.a.createElement("p",null,'"B sharp" is one of the first little musical jokes you get to say when you\'re in the know, until you learn that when you really get in deep, actually "B sharp" ',c.a.createElement("i",null,"is"),' a real note. There\'s even a "B double sharp"! How many notes ',c.a.createElement("i",null,"are"),' there!? Answer: infinite, as there are infinite numbers between 0 and 1, there are infinite pitches. Another answer, and this is the one we\'ll focus on in this website, is 12. There are 12 pitch-classes in the musical system that westerners refer to as "music theory" and more formally 12-tone equal temperament. All the fancy names like "B flat" and "F sharp" are just various spellings of the 12 pitch-classes in 12-TET.'),c.a.createElement("p",null,'This is all kind of interesting for a while and makes a young musician wonder about how deep this labyrinth gets. But it\'s all a smoke screen. And it gets even worse when you start to learn about intervals. Honestly, what\'s the use of a "diminished second" if not to sound pedantic and "technically correct"?'),c.a.createElement("p",null,"While I'll concede that it sort of makes sense when you're talking about notes ",c.a.createElement("i",null,"written on a staff"),", I'll maintain that it's a bullshit system to think in and it's needlessly convoluted, scares off all but the masochistic academics and overachievers. It adds a layer of cognitive as well as verbal overhead to otherwise simple concepts, and all so that we can pretend that music all fits into this diatonic model, with a few outliers that we call \"accidentals\". It makes the white keys approachable and the black keys scary and hard to name. \"Is it a C# or a Db\"? Why do we care, when we really just want to think about the one pitch we're trying to finger?"),c.a.createElement("p",null,"If we're going to commit to this arguably artificial model of 12 notes, which is but one of a panoply of more naturally harmonious tunings, if we're going to compromise with this 12-TET model so that we end up with 12 equally spaced notes around the octave, let's go all in and treat it with the simple terms it asks for. Let's treat these 12 notes equally instead of imagining this additional layer of complexity on top of them."),c.a.createElement("br",null),c.a.createElement("hr",null),c.a.createElement("h2",null,"Please consider:"),c.a.createElement("pre",null,i.a.range(12).map(function(e){return c.a.createElement(m,{key:e,n:e})})),c.a.createElement("p",null,' That\'s "oh" "one" "two" "three" "four" "five" "six" "sev" "eight" "nine" "ten" "el".'))},E=function(){return c.a.createElement(c.a.Fragment,null,i.a.range(6).map(function(e){return c.a.createElement("div",{style:{display:"block",flexShrink:0,margin:"1em"}},i.a.range(13).map(function(t){return c.a.createElement(c.a.Fragment,null,i.a.range(13).map(function(n){return c.a.createElement(m,{key:n,n:e+n*t})}),c.a.createElement("br",null))}))}))},w=n(2),C=n(1),x=n(5),S=n(3),M=n(6),O=function(e){function t(){var e,n;Object(w.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(x.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(r)))).state={text:""},n.handleKeyPress=function(e){var t={Backquote:"0",Digit1:"1",Digit2:"2",Digit3:"3",Digit4:"4",Digit5:"5",Digit6:"6",Digit7:"7",Digit8:"8",Digit9:"9",Digit0:"\u0aea",Minus:"\u0190",Equal:"0",Numpad0:"0",Numpad1:"1",Numpad2:"2",Numpad3:"3",Numpad4:"4",Numpad5:"5",Numpad6:"6",Numpad7:"7",Numpad8:"8",Numpad9:"9",NumpadDivide:"\u0aea",NumpadMultiply:"\u0190",NumpadDecimal:" ",NumpadEnter:"\n",Enter:"\n",Space:" "}[e.code];t&&(e.preventDefault(),n.setState({text:n.state.text+t}))},n.handleChange=function(e){var t=e.target.value;return n.setState({text:t})},n}return Object(M.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keypress",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keypress",this.handleKeyPress)}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("h3",null,"Use the numpad to enter pitch classes"),c.a.createElement("textarea",{cols:24,rows:20,onChange:this.handleChange,style:{background:"black",color:"darkgray",fontSize:20},value:this.state.text}))}}]),t}(o.Component),I=n(73),j=n.n(I),D=n(15),T=n.n(D),z=n(12),P=n(115),N=n(24),A=n(96),L=n.n(A),R=n(106),F=n.n(R),B=n(103),q=n.n(B),K=n(104),W=n.n(K),_=n(102),G=n.n(_),U=n(101),V=n.n(U),H=n(100),Y=n.n(H),X=n(99),J=n.n(X),Q=n(108),Z=n.n(Q),$=n(107),ee=n.n($),te=n(105),ne=n.n(te),ae=n(109),re=n.n(ae),ie=n(97),oe={input:void 0,inputDevices:[],isMidiClockInSelectorOpen:!1,isMidiInSelectorOpen:!1,midiClockInDevice:void 0,midiInDevice:void 0,midiIn:i.a.zipObject(i.a.range(128),i.a.fill(new Array(128),0))},ce={setInputDevices:function(e,t){return e.setState({inputDevices:t})},setMidiEvent:function(e,t){return e.setState({midiIn:i.a.merge(e.state.midiIn,t)})},setMidiClockInDevice:function(e,t){return e.setState({midiClockInDevice:t})},setMidiInDevice:function(e,t){return e.setState({midiInDevice:t})},toggleMidiInSelector:function(e){return e.setState({isMidiInSelectorOpen:!e.state.isMidiInSelectorOpen})},toggleMidiClockInSelector:function(e){return e.setState({isMidiClockInSelectorOpen:!e.state.isMidiClockInSelectorOpen})}},le=Object(ie.a)(c.a,oe,ce),se=function(e){var t=le(function(e){return{midiClockInDevice:e.midiClockInDevice}},function(e){return e}),n=Object(a.a)(t,2),r=n[0].midiClockInDevice,i=(n[1],0);return Object(o.useEffect)(function(){var t=function(t){i++,e&&e({tick:i})};return r&&r.addListener("clock","all",t),function(){r&&r.removeListener("clock","all",t)}},[r]),{midiClockInDevice:r,reset:function(){i=0}}},ue=n(98),de=n.n(ue),me=function(e,t){var n=Object(o.useState)(t),r=Object(a.a)(n,2),i=r[0],c=r[1],l=Object(o.useState)(null),s=Object(a.a)(l,2),u=s[0],d=s[1],m=Object(o.useState)(null),h=Object(a.a)(m,2),f=h[0],p=h[1];u&&(u.setState=c,u.state=i);var v=Object(o.useCallback)(function(t){if(t){var n=new de.a(e,t);d(n),n._height=t.clientHeight,n._width=t.clientWidth;var r=new ResizeObserver(function(e){var t=Object(a.a)(e,1)[0].contentRect,r=t.height,i=t.width;n.resizeCanvas(i,r),i+r>0&&c(function(e){return Object(N.a)({},e,{isRegenNeeded:!0})})});p(r),r.observe(t)}else f&&f.disconnect()},[]);return{sketchInstance:u,sketchState:i,setSketchState:c,ref:v}};function he(e,t,n){var a,r,i,o,c,l,s,u;switch(1===arguments.length&&(t=e.s,n=e.v,e=e.h),l=n*(1-t),s=n*(1-(c=6*e-(o=Math.floor(6*e)))*t),u=n*(1-(1-c)*t),o%6){case 0:a=n,r=u,i=l;break;case 1:a=s,r=n,i=l;break;case 2:a=l,r=n,i=u;break;case 3:a=l,r=s,i=n;break;case 4:a=u,r=l,i=n;break;case 5:a=n,r=l,i=s}return function(e){var t=e.r,n=e.g,a=e.b;function r(e){var t=e.toString(16);return 1==t.length?"0"+t:t}return"#"+r(t)+r(n)+r(a)}({r:Math.round(255*a),g:Math.round(255*r),b:Math.round(255*i)})}var fe={decayDuration:5e3,exciteEnergy:.05,exciteDuration:1e3,fundamentalFreq:200,hilbertN:64,hilbMand:[],isControlPanelOpen:!0,isPlaying:!1,isRegenNeeded:!0,maxIters:4096,midiClock:0,midiClocksPerTick:24,panX:-.05,panY:0,partials:{},partialsCountMax:16,isSmooth:!1,tick:0,tickDuration:100,tickLastMillis:0,zoom:1.2},pe=new AudioContext,ve=[],ge=pe.createGain();window.masterGain=ge,ge.gain.value=1,ge.connect(pe.destination);var ye=function(e){e.state=fe;var t,n=function(e,t,n,a){if(0===a){1===n&&(t.x=e-1-t.x,t.y=e-1-t.y);var r=t.x;t.x=t.y,t.y=r}},a=function(e,t){return i.a.reduce(e,function(e,n,a){return e+n*t[a]},0)},r=function(t,n,r,i,o,c){var l=function(e,t){return{x:3.5*e-2.5,y:2*t-1}}(.5-r+(t-.5)/o,.5-i+(n-.5)/o),s=l.x,u=l.y;return e.state.isSmooth?function(e,t,n){for(var r,i,o=[0,0],c=0,l=0;l<n&&(r=o[0],i=o[1],o[0]=r*r-i*i+e,o[1]=2*r*i+t,!(a(o,o)>65536));l++)c++;return c>=n?n:c-Math.log2(Math.log2(a(o,o)))+4}(s,u,c):function(e,t,n){for(var a=0,r=0,i=0;a*a+r*r<4&&i<n;){var o=a*a-r*r+e;r=2*a*r+t,a=o,i++}return i}(s,u,c)},o=i.a.memoize(function(e){return i.a.range(e*e).map(function(t){return function(e,t){for(var a={x:0,y:0},r=1;r<e;r*=2){var i=1&t/2,o=1&(t^i);n(r,a,i,o),a.x+=r*i,a.y+=r*o,t/=4}return a}(e,t)})}),c=function(t){var n=t/e.state.hilbertN;return 1*Math.min(10,n/20)},l=i.a.memoize(function(e){return i()(100).range().map(function(e){return Math.pow(2,e)}).dropWhile(function(t){return e/t>=2}).first()}),s=function(t){var n=t.m,a=t.p,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.state,o=i.maxIters,c=i.partialsCountMax,s=l(c),u=l(a),d=255*Math.log2(a/u),m=r?0:255-225*Math.pow(u/s,2),h=r?255:n===o?0:30+225*Math.pow(u/s,2);return e.color(d,m,h,r?.7:255)},u=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.fill(s(t,n))},d=function(t,n,a,r){var i=t/r,o=n/r;e.rect(a.x*i,a.y*o,i,o)},m=function(t,n,a){var r=a.hilbertN,i=a.hilbMand,o=c(e.width/2);e.strokeWeight(o),e.stroke(0);var l=h(i.length,e.width/4,e.height);i.forEach(function(a,i){u(a),e.push(),e.translate(e.width/4,0),d(t,n,a,r),e.pop(),e.push(),e.translate(e.width/4*3,0),f(e.width/4,l,i),e.pop()})},h=function(e,t,n){for(var a=t*n,r=Math.sqrt(a/e),i=0,o=1;o<t;o++)if(!((i=t/o)>r)){var c=t/i;if(e/c*i+(e%c>0?i:0)<=n)break}return i},f=function(t,n,a){var r=t/n,i=a%r,o=Math.floor(a/r);o%2===1&&(i=r-(i+1)),e.rect(i*n,o*n,n,n)},p=function(){e.background(32),ve.forEach(function(e){var t=e.gain;t.gain.cancelScheduledValues(pe.currentTime),t.gain.linearRampToValueAtTime(0,pe.currentTime+.5)}),ve.length!==a&&(ve.forEach(function(e){var t=e.osc;e.gain,t.stop()}),ve=i.a.range(e.state.partialsCountMax).map(function(){var e=pe.createOscillator(),t=pe.createGain();return t.gain.value=0,e.connect(t),t.connect(ge),e.start(),{osc:e,gain:t}}),window.oscs=ve);var t=e.state,n=t.fundamentalFreq,a=t.partialsCountMax,c=function(){var t=e.state,n=t.hilbertN,a=t.maxIters,i=t.panX,c=t.panY,l=t.partialsCountMax,s=t.zoom;return o(n).map(function(e){var t=e.x,o=e.y,u=r(t/n,o/n,i,c,s,a);return{x:t,y:o,m:u,p:u===a?0:Math.floor((u-1)%l+1)}})}(),l=i()(c).map(function(e){return e.p}).filter(i.a.identity).uniq().sort().take(a).map(function(e,t){return[e,{amp:0,oscIdx:t}]}).fromPairs().value();i.a.each(l,function(e,t){var a=e.decayTimerId,r=e.oscIdx,i=e.zeroGainTimerId;clearTimeout(a),clearTimeout(i),ve[r].osc.frequency.cancelScheduledValues(pe.currentTime),ve[r].osc.frequency.linearRampToValueAtTime(t*n,pe.currentTime+.5)}),e.setState(function(t){var n=Object(N.a)({},t,{hilbMand:c,isRegenNeeded:!1,partials:l});return m(e.width/2,e.height,n),n})},v=0,g=function(t){var n=e.state.hilbMand,a=e.state.tick%n.length,r=n[a],i=h(n.length,e.width/4,e.height),o=c(e.width/2);e.strokeWeight(o),function(t,n,a){var r=e.state.hilbMand[a%t];u(r),e.stroke(0),e.push(),e.translate(e.width/4,0),d(e.width/2,e.height,r,e.state.hilbertN),e.pop(),e.push(),e.translate(e.width/4*3,0),f(e.width/4,n,a),e.pop()}(n.length,i,v),v=a,e.stroke(20*t%255,0,255),u(r,!0),e.push(),e.translate(e.width/4,0),d(e.width/2,e.height,r,e.state.hilbertN),e.pop(),e.push(),e.translate(e.width/4*3,0),f(e.width/4,i,a),e.pop()},y=function(){var t=e.height,n=e.width/4;e.noStroke();var a=e.state,r=a.partials,o=a.partialsCountMax;i.a.each(r,function(a,r){var i=a.amp,c=a.oscIdx,l=t/o,u=t*((r-1)/o),d=ve[c].gain.gain.value*n,m=s({m:1,p:r});e.fill(e.color(e.hue(m),255,8)),e.rect(0,u,n,l),e.fill(m),e.rect(0,u,d,l),e.fill(255),e.rect(i*n,u,1,l)})},k=!0;e.preload=function(){t=e.loadFont("JetBrainsMono-Regular.ttf")},e.setup=function(){e.createCanvas(e._width,e._height),e.colorMode(e.HSB),e.textFont(t)},e.incrementTick=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=e.millis(),a=e.state,r=a.isPlaying,o=a.isRegenNeeded,c=a.midiClocksPerTick,l=a.tickDuration,s=a.tickLastMillis;t&&e.state.midiClock++,r&&!o&&(t?e.state.midiClock%c===0:n>s+l)&&(e.state.tick++,e.state.tickLastMillis=n,function(t){var n=e.state,a=n.decayDuration,r=n.exciteEnergy,o=n.exciteDuration,c=n.hilbMand,l=n.partials,s=c[n.tick%c.length].p;if(s>0){var u=l[s],d=u.amp,m=u.decayTimerId,h=u.oscIdx,f=u.zeroGainTimerId,p=ve[h].gain,v=i.a.isNumber(m)?d:p.gain.value,g=.8*Math.min(1,v+r*(1-v));u.amp=g,clearTimeout(m),clearTimeout(f),p.gain.cancelScheduledValues(0),p.gain.linearRampToValueAtTime(g,pe.currentTime+o/1e3),u.decayTimerId=setTimeout(function(){p.gain.exponentialRampToValueAtTime(1e-5,pe.currentTime+a/1e3),u.decayTimerId=null,u.zeroGainTimerId=setTimeout(function(){u.amp=0},a)},o)}}())};var b=0;e.draw=function(){var t=e.state,n=t.isPlaying,a=t.isRegenNeeded,r=t.midiClock;a&&p(),0===r&&e.incrementTick(),i.a.every([!a,e.state.tick!==b])&&(g(0),b=e.state.tick),n&&y(),e.state.isPlaying||e.state.isControlPanelOpen?k&&(y(),m(e.width/2,e.height,e.state),k=!1):(k=!0,e.background(0,.1),e.noFill(),e.stroke(192,127,90),e.textSize(10),e.text("arrow keys to move",0,e.height/2-50,e.width,e.height),e.text("shift+arrow for zoom/resolution",0,e.height/2-35,e.width,e.height),e.text("shift+spacebar toggle controls",0,e.height/2-20,e.width,e.height),e.textSize(20),e.textAlign(e.CENTER),e.text("spacebar to start",0,e.height/2,e.width,e.height))},e.toggleAudio=function(){e.setState(function(e){var t=e.isPlaying;return t||"running"===pe.state||pe.resume(),t&&"running"===pe.state&&pe.suspend(),Object(N.a)({},e,{isPlaying:!e.isPlaying})})}},ke=n(183),be=n(152),Ee=n(198),we=n(184),Ce=Object(ke.a)({paper:{background:"rgba(0,0,0,0.7)",paddingBottom:65}}),xe=function(e){var t=e.sketchState,n=e.setSketchState,a=e.stateKey,r=Object(P.a)(e,["sketchState","setSketchState","stateKey"]);return c.a.createElement("div",null,a,": ",t[a],c.a.createElement("br",null),c.a.createElement("input",Object.assign({type:"range",style:{width:400},value:t[a],onChange:function(e){var t=Number(e.target.value);n(function(e){return Object(N.a)({},e,Object(z.a)({},a,t))})}},r)))},Se=function(e){var t=e.sketchState,n=e.setSketchState,r=e.stateKey,i=Object(o.useState)(function(){return{deg:0,exp:0,txt:1}}),l=Object(a.a)(i,2),s=l[0],u=l[1];return c.a.createElement("div",null,r,": ",t[r],c.a.createElement("br",null),c.a.createElement("div",{style:{position:"relative"},onPointerUp:function(){t.isRegenNeeded=!0}},c.a.createElement(L.a,{dataIndex:s.deg,min:0,max:2047,knobColor:"#AAA",label:"Fundamental Frequency",renderLabelValue:c.a.createElement("input",{type:"number",style:{background:"none",border:"none",color:"white",fontSize:"2em",left:"50%",marginLeft:"-35%",marginTop:"-0.5em",position:"absolute",textAlign:"center",top:"50%",width:"70%",zIndex:3},value:s.txt,onChange:function(e){u(Object(N.a)({},s,{txt:Number(e.target.value)}))},onKeyDown:function(e){if("Enter"===e.key){var t=Math.max(s.txt,Number.MIN_VALUE),a=Math.log2(t),i=Math.floor(a);u({deg:Math.floor(2048*(a-i)),exp:i,txt:t}),n(function(e){var n;return Object(N.a)({},e,(n={},Object(z.a)(n,r,t),Object(z.a)(n,"isRegenNeeded",!0),n))})}}}),onChange:function(e){var t=s.deg,a=s.exp,i=e>=0&&e<2048/3&&t>2048-2048/3,o=t>=0&&t<2048/3&&e>2048-2048/3,c=Math.pow(2,a+t/2048);u({deg:e,exp:i?a+1:o?a-1:a,txt:c}),n(function(e){return Object(N.a)({},e,Object(z.a)({},r,c))})},progressColorFrom:he(s.exp/15,1,1),progressColorTo:he((s.exp+1)/15,1,1),progressLineCap:"flat",trackColor:"#666",valueFontSize:"4rem"})))},Me=function(){var e=me(ye,fe),t=e.ref,n=e.sketchInstance,a=e.sketchState,r=e.setSketchState;window.sketchInstance=n;var l=function(e){return function(t){return function(){"toggleAudio"!==t?e.setState(function(e){var n=e.hilbertN,a=e.isControlPanelOpen,r=e.isRegenNeeded,o=e.panX,c=e.panY,l=e.zoom,s=.1/l,u={moveLeft:{panX:o+s},moveRight:{panX:o-s},moveUp:{panY:c+s},moveDown:{panY:c-s},resDec:{hilbertN:Math.pow(2,Math.log2(n)-1)},resInc:{hilbertN:Math.min(256,Math.pow(2,Math.log2(n)+1))},toggleControlPanel:{isControlPanelOpen:!a,isRegenNeeded:r},zoomIn:{zoom:l*(10/9)},zoomOut:{zoom:.9*l}}[t];return Object(N.a)({},e,{isRegenNeeded:!i.a.isEmpty(u)},u)}):e.toggleAudio()}}}(n);Object(o.useEffect)(function(){if(document.title="Mandelbrot Muse",n){var e=function(e){return function(t){var n=t.code,a=t.shiftKey,r=t.key;if("Space"!==n){var i={ArrowDown:function(){return a?"zoomOut":"moveDown"},ArrowLeft:function(){return a?"resDec":"moveLeft"},ArrowRight:function(){return a?"resInc":"moveRight"},ArrowUp:function(){return a?"zoomIn":"moveUp"}}[r];i&&e(i())()}else e(a?"toggleControlPanel":"toggleAudio")()}}(l);return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}},[n]);var s=se(function(){n&&n.incrementTick(!0)}).midiClockInDevice;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{ref:t,style:{alignSelf:"start",background:"radial-gradient(circle, rgba(74,153,117,1) 0%, rgba(188,148,233,0.6943726953672094) 100%)",height:"50vw",width:"100vw"}}),c.a.createElement("div",{style:{bottom:0,padding:0,position:"absolute",textAlign:"center",zIndex:1e6}},!a.isControlPanelOpen&&c.a.createElement(be.a,{onClick:l("toggleControlPanel")},"show",c.a.createElement(J.a,null),"controls"),c.a.createElement(Ee.a,{anchor:"top",classes:Ce(),color:"transparent",open:a.isControlPanelOpen,onClose:l("toggleControlPanel"),variant:"persistent"},c.a.createElement(we.a,{fullWidth:!0,size:"large"},c.a.createElement(be.a,{onClick:l("toggleAudio")},a.isPlaying?c.a.createElement(V.a,null):c.a.createElement(Y.a,null)),c.a.createElement(be.a,{onClick:l("toggleControlPanel")},"hide controls")),c.a.createElement(we.a,{fullWidth:!0,size:"large"},c.a.createElement(be.a,{onClick:l("moveUp")},c.a.createElement(G.a,null)),c.a.createElement(be.a,{onClick:l("moveLeft")},c.a.createElement(q.a,null)),c.a.createElement(be.a,{onClick:l("moveRight")},c.a.createElement(W.a,null)),c.a.createElement(be.a,{onClick:l("zoomIn")},c.a.createElement(ne.a,null))),c.a.createElement(we.a,{fullWidth:!0,size:"large"},c.a.createElement(be.a,{onClick:l("moveDown")},c.a.createElement(F.a,null)),c.a.createElement(be.a,{onClick:l("resDec")},c.a.createElement(ee.a,null)),c.a.createElement(be.a,{onClick:l("resInc")},c.a.createElement(Z.a,null)),c.a.createElement(be.a,{onClick:l("zoomOut")},c.a.createElement(re.a,null))),s?c.a.createElement(xe,{min:1,max:1024,stateKey:"midiClocksPerTick",sketchState:a,setSketchState:r}):c.a.createElement(xe,{min:16,max:1e3,stateKey:"tickDuration",sketchState:a,setSketchState:r}),c.a.createElement(xe,{min:1,max:4e3,stateKey:"exciteDuration",sketchState:a,setSketchState:r}),c.a.createElement(xe,{min:10,max:8e3,stateKey:"decayDuration",sketchState:a,setSketchState:r}),c.a.createElement(xe,{min:.01,max:1,step:.01,stateKey:"exciteEnergy",sketchState:a,setSketchState:r}),c.a.createElement(Se,{stateKey:"fundamentalFreq",sketchState:a,setSketchState:r}),c.a.createElement(xe,{min:1,max:1e3,stateKey:"partialsCountMax",sketchState:a,setSketchState:r,onPointerUp:function(){console.log("onPointerUp"),a.isRegenNeeded=!0}}),c.a.createElement(xe,{min:64,max:8e3,stateKey:"maxIters",sketchState:a,setSketchState:r,onPointerUp:function(){console.log("onPointerUp"),a.isRegenNeeded=!0}}))))},Oe=function(){return c.a.createElement(g,{fretCount:20,fretMarkers:[0,3,5,7,10,12,15],tuning:[7,2,9,4]})},Ie=n(197),je=n(199),De=n(78),Te=n.n(De),ze=n(185),Pe=n(186),Ne=function(){var e=le(function(e){return{inputDevices:e.inputDevices,isMidiClockInSelectorOpen:e.isMidiClockInSelectorOpen,isMidiInSelectorOpen:e.isMidiInSelectorOpen,midiInDevice:e.midiInDevice}},function(e){return e}),t=Object(a.a)(e,2),n=t[0],r=t[1],l=n.inputDevices,s=n.isMidiClockInSelectorOpen,u=n.isMidiInSelectorOpen,d=n.midiInDevice;Object(o.useEffect)(function(){Te.a.enable(function(e){e?console.error(e):(console.log("WebMidi enabled."),r.setInputDevices(Te.a.inputs))},!0)},[]);var m=function(e){e.note.number,e.rawVelocity,e.type},h=function(e){},f=c.a.useState(null),p=Object(a.a)(f,2),v=p[0],g=p[1],y=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t){var n=t.currentTarget;g(n),r[e?"toggleMidiClockInSelector":"toggleMidiInSelector"]()}},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){var a=n.currentTarget;g(a);var i=l[e];r[t?"toggleMidiClockInSelector":"toggleMidiInSelector"](),t?(i.addListener("clock","all",h),r.setMidiClockInDevice(i)):(r.setMidiInDevice(i),i.addListener("noteon","all",m),i.addListener("noteoff","all",m))}};return c.a.createElement(c.a.Fragment,null,c.a.createElement(ze.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:y(!1)},c.a.createElement("img",{src:"noun_MIDI_385872.svg",style:{width:"1.5em",height:"1.5em"}})),c.a.createElement(ze.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:y(!0)},c.a.createElement(Pe.a,null)),c.a.createElement(Ie.a,{id:"simple-menu",anchorEl:v,open:u||s,onClose:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(){console.log("close",e?"toggleMidiClockInSelector":"toggleMidiInSelector"),r[e?"toggleMidiClockInSelector":"toggleMidiInSelector"](),g(null)}}(s)},l.map(function(e,t){var n=e.name;return c.a.createElement(je.a,{key:n,onClick:k(t,s),selected:u&&n===i.a.get(d,"name")},n)})))},Ae={decayDuration:5e3,exciteEnergy:.05,exciteDuration:1e3,fundamentalFreq:200,hilbertN:64,hilbMand:[],isControlPanelOpen:!0,isPlaying:!1,isRegenNeeded:!0,maxIters:4096,midiClock:0,midiClocksPerTick:24,panX:-.05,panY:0,partials:{},partialsCountMax:16,isSmooth:!1,tick:0,tickDuration:100,tickLastMillis:0,zoom:1.2},Le=new AudioContext,Re=Le.createGain();window.masterGain=Re,Re.gain.value=1,Re.connect(Le.destination);var Fe=function(e){e.state=Ae;var t;e.preload=function(){t=e.loadFont("JetBrainsMono-Regular.ttf")};var n,r,i,o,c=2*Math.PI,l=0;o=2,i=1,e.setup=function(){e.createCanvas(e._width,e._height),e.blendMode(e.ADD),e.colorMode(e.HSB,255),e.textFont(t)};var s=[];e.keyTyped=function(){if(console.log(e.key),"Enter"===e.key){var t=s.join("").split(":").map(function(e){return parseInt(e,10)});l=0;var c=Object(a.a)(t,3);if(i=c[0],o=c[1],!(l=c[2])){var u=Object(a.a)(t,2);o=u[0],i=u[1],l=0}console.log(i,o,l),console.log(r,n),s=[]}else s.push(e.key);return!1};var u,d=0,m=0,h=0,f=function(t){var a=t.freq,i=t.phase,o=void 0===i?0:i,l=t.hue,s=c/500;e.push(),e.translate(r/2,n/2);for(var d=0;d<c-s;d+=s)e.stroke(l,255,a&&50+50*Math.sin(d*a),100),m=(u=r+n)*Math.sin(d+o),h=u*Math.cos(d+o),e.line(0,0,m,h);e.pop()};e.draw=function(){e.clear(),e.background(0,0,0),n=e.height,r=e.width,d=e.millis()*(.001/i),f({freq:i,hue:0,phase:d}),f({freq:i*o/i,hue:90,phase:2*d}),f({freq:i*l/o,hue:180,phase:3*d}),e.blendMode(e.BLEND),e.fill(255),e.stroke(0),e.strokeWeight(4),e.textAlign(e.CENTER,e.CENTER),e.textSize(n/15),e.text(l?"".concat(i,":").concat(o,":").concat(l):"".concat(o,":").concat(i),r/2,n/2),e.blendMode(e.ADD)},e.toggleAudio=function(){e.setState(function(e){var t=e.isPlaying;return t||"running"===Le.state||Le.resume(),t&&"running"===Le.state&&Le.suspend(),Object(N.a)({},e,{isPlaying:!e.isPlaying})})}},Be=function(){var e=me(Fe,Ae),t=e.ref,n=e.sketchInstance;e.sketchState,e.setSketchState;return window.sketchInstance=n,Object(o.useEffect)(function(){document.title="Ratio Lightship"},[n]),c.a.createElement("div",{ref:t,style:{alignSelf:"start",background:"radial-gradient(circle, rgba(74,153,117,1) 0%, rgba(188,148,233,0.6943726953672094) 100%)",height:"100vh",width:"100vw"}})},qe=n(113).a.Flow,Ke=function(){var e=function(){var e=Object(o.useState)(null),t=Object(a.a)(e,2),n=t[0],r=t[1],i=Object(o.useState)(null),c=Object(a.a)(i,2),l=c[0],s=c[1];return{context:n,ref:Object(o.useCallback)(function(e){if(e){var t=new qe.Renderer(e,qe.Renderer.Backends.SVG);t.resize(e.clientWidth,e.clientHeight),r(t.getContext());var n=new ResizeObserver(function(e){var n=Object(a.a)(e,1)[0].contentRect,r=n.height,i=n.width;t.resize(i,r)});s(n),n.observe(e)}else l.disconnect()},[])}}(),t=e.context,n=e.ref;if(t){t.setStrokeStyle("white"),t.setFillStyle("white");var r=new qe.Stave(50,0,1e4).addClef("treble").addKeySignature("Db").addTimeSignature("4/4").setContext(t).draw();window.VF=qe,window.context=t,window.treble=r;var i=new qe.Stave(50,60,1e4).addClef("bass").addTimeSignature("4/4").addKeySignature("Db").setContext(t).draw();new qe.StaveConnector(r,i).setType(qe.StaveConnector.type.BRACE).setContext(t).draw(),new qe.StaveConnector(r,i).setType(qe.StaveConnector.type.SINGLE_LEFT).setContext(t).draw()}return c.a.createElement("div",{style:{display:"block",width:"100%"}},c.a.createElement("div",{ref:n,style:{fill:"white",height:500,stroke:"white"}}))},We=function(){return c.a.createElement("div",{style:{display:"block",flexShrink:0}},i.a.range(30).map(function(e){return c.a.createElement(c.a.Fragment,null,i.a.range(50).map(function(t){var n=((e%2>0?(e-1)/2*11+3:e/2*11)+7*t)%12;return c.a.createElement(m,{key:t,n:n,isOdd:e%2===1})}),c.a.createElement("br",null))}))},_e=function(){return c.a.createElement(g,{fretCount:18,fretMarkers:[0,5,7,10,12],tuning:[7,4,0,9]})},Ge=n(187),Ue=(n(136),n(18)),Ve=function(){return c.a.createElement(Ue.Entity,{primitive:"a-camera",id:"camera",position:{x:0,y:0,z:0},"look-controls":!0,"wasd-controls":{acceleration:25}})},He=function(e){return function(t){if(t){var n=t.components.osc;n.onOsc=function(t){t.instrument;var a=t.note,r=t.vel;a===e&&(n.vel=r)},n.onTick=function(e,a){n.vel,i.a.has(n,"vel")&&t.setAttribute("material","opacity",.05+.75*n.vel/128)}}}},Ye=function(e){var t=e.darkened,n=void 0===t||t,a=e.n,r=e.position,i=void 0===r?{x:0,y:0,z:0}:r,o=e.scale,l=void 0===o?{x:1,y:1,z:1}:o;return c.a.createElement(Ue.Entity,{_ref:He(a),material:{blending:n?"normal":"additive",color:he(a/12,.7,n?0:1),opacity:n?.5:.1},osc:{},position:i,primitive:"a-torus",radius:.1,"radius-tubular":.003,scale:l},c.a.createElement(Ue.Entity,{"look-at":"#camera",position:{x:0,y:0,z:0},scale:{x:2,y:2,z:2},text:{align:"center",color:he(a/12,.75,.5),font:"../JetBrainsMono-Regular-msdf.json",negate:!1,transparent:!0,value:d(a)}}))},Xe=function(){var e=Object(o.useState)(!0),t=Object(a.a)(e,2),n=t[0],r=t[1];Object(o.useEffect)(function(){var e=function(e){"r"===e.key&&r(function(e){return!e})};return window.addEventListener("keyup",e),function(){return window.removeEventListener("keyup",e)}},[]);var l=le(),s=Object(a.a)(l,1)[0].midiIn,u=i()(12).range().map(function(e){return i()(s).pickBy(function(t,n){return n%12===e}).values().sum()}).value();return c.a.createElement(Ue.Entity,{animation:"property: rotation; to: 0 ".concat(n?180:0," 0; dur: 500;"),position:"0 0 -3"},i()(12).range().filter(function(e){return e%2==0}).map(function(e){return{n:e,r:1.5,x:-Math.sin(e*Math.PI/6),y:Math.cos(e*Math.PI/6)}}).map(function(e){var t=e.n,n=e.r,a=e.x,r=e.y;return c.a.createElement(Ye,{midiIn:u[t],n:t,position:"".concat(n*a," ").concat(n*r," 0")})}).value(),i()(48).range().filter(function(e){return!i.a.includes([6,7,0,1],e%8)}).map(function(e,t){return{i:t,n:(2*(t+1)+2*Math.floor(t/4))%12,r:1.5,x:Math.sin((e+.5)*Math.PI/24),y:Math.cos((e+.5)*Math.PI/24)}}).map(function(e){var t=e.n,n=e.r,a=e.x,r=e.y;return c.a.createElement(Ye,{midiIn:u[t],n:t,position:"".concat(n*a," ").concat(n*r," 0"),scale:"0.5 0.5 0.5"})}).value(),i()(12).range().filter(function(e){return e%2!=0}).map(function(e){return{n:(e+6)%12,r:1.2,x:-Math.sin(e*Math.PI/6),y:Math.cos(e*Math.PI/6)}}).map(function(e){var t=e.n,n=e.r,a=e.x,r=e.y;return c.a.createElement(Ye,{midiIn:u[t],n:t,position:"".concat(n*a," ").concat(n*r," 0")})}).value(),i()(48).range().filter(function(e){return!i.a.includes([4,5,6,7],e%8)}).map(function(e,t){return{i:t,n:(2*t+9+2*Math.floor(t/4))%12,r:1.2,x:Math.sin((e-1.5)*Math.PI/24),y:Math.cos((e-1.5)*Math.PI/24)}}).map(function(e){var t=e.n,n=e.r,a=e.x,r=e.y;return c.a.createElement(Ye,{midiIn:u[t],n:t,position:"".concat(n*a," ").concat(n*r," 0"),scale:"0.5 0.5 0.5"})}).value())},Je=1.3305869973355013,Qe=2.152934986677507,Ze=[[0,-Qe,Je],[0,Qe,-Je],[Qe,-Je,0],[-Qe,Je,0],[0,-Qe,-Je],[0,Qe,Je],[-Qe,-Je,0],[Qe,Je,0],[-Je,0,Qe],[Je,0,-Qe],[Je,0,Qe],[-Je,0,-Qe]],$e=function e(t){var n=t.rep,a=void 0===n?1:n,r=t.sat,i=t.stack,o=void 0===i?[]:i,l=t.n,s=void 0===l?0:l;return c.a.createElement(Ue.Entity,{position:"0 0 0"},Ze.map(function(e,t){return c.a.createElement(Ue.Entity,{key:t,color:he(t*(1/12),r||1,1),events:{click:function(){return console.log(t)}},primitive:"a-sphere",position:e.join(" "),scale:[1,1,1].map(function(e){return.3*e/(a*a)}).join(" ")})}),a<3&&Ze.map(function(t,n){return c.a.createElement(Ue.Entity,{key:n,position:t.map(function(e){return 2*e}).join(" "),text:"color: ".concat(he((o.length?o[o.length-1]:n)*(1/12),1,1),"; align: center; value: ").concat([].concat(Object(v.a)(o),[n]).join(",")," - ").concat((s+n)%12,"; width: 5; zOffset: 0")},c.a.createElement(e,{rep:a+1,sat:.3,stack:[].concat(Object(v.a)(o),[n]),n:(s+n)%12}))}))},et=n(110),tt=n(77),nt=n.n(tt),at=function(e){Object(et.a)(e);var t=Object(o.useState)(),n=Object(a.a)(t,2),r=n[0],l=n[1],s=Object(o.useCallback)(l,[]),u=se(function(e){var t=e.tick;t%24===0&&console.log(t),r&&r.object3D.position.set(0,0,t/96*.75)}).reset;window.reset=u,Object(o.useEffect)(function(){var e=function(e){e.code,e.key};return window.addEventListener("keyup",e),function(){return window.removeEventListener("keyup",e)}},[]);var d=[[2,5,9],[7,11,2],[0,4,7]];return c.a.createElement(Ue.Entity,{_ref:s,position:{x:0,y:0,z:-2},scale:{x:4,y:4,z:4}},i.a.range(50).map(function(e){return 50-e}).map(function(e){return{coll:d[e%d.length],z:-.75*e}}).map(function(e){var t=e.coll,n=e.z;return c.a.createElement(c.a.Fragment,{key:n},c.a.createElement(Ue.Entity,{material:{color:"#040404",opacity:.45},position:{x:0,y:0,z:n-.01},rotation:{x:90,y:0,z:0},primitive:"a-cylinder",scale:{x:1,y:.001,z:1}}),i.a.range(12).map(function(e){var t=e*(2*Math.PI)/12;return{n:e,x:.25*Math.sin(t),y:.25*Math.cos(t)}}).map(function(e){var a=e.n,r=e.s,o=void 0===r?.5:r,l=e.x,s=e.y;return c.a.createElement(Ye,{darkened:!i.a.includes(t,a),key:a,n:a,position:{x:l,y:s,z:n},scale:{x:o,y:o,z:o}})}))}))},rt=function(e){var t=e.noteToDimensions,n=Object(o.useState)(),r=Object(a.a)(n,2),l=r[0],s=r[1],u=le(),d=Object(a.a)(u,1)[0].midiInDevice,m=function(e){var t=Object(o.useRef)();return Object(o.useEffect)(function(){t.current=e}),t.current}(d);Object(o.useEffect)(function(){var e=function(e){var n=e.note.number,a=e.velocity,r=e.type,i=a/(.1+a),o=t(n),c=o.s,s=o.x,u=o.y,d=o.z;l.setAttribute("material","opacity",i),"noteon"===r&&(l.note=n,l.object3D.position.set(s,u,d+.01),l.object3D.scale.set(1.1*c,1.1*c,1.1*c),l.setAttribute("material","color",he(n/12,.75,.5)))};return l&&d&&(console.log("new midiInDevice: ",i.a.get(d,"name"),"prev: ",i.a.get(m,"name")),d.addListener("noteon","all",e),d.addListener("noteoff","all",e),d.addListener("controlchange","all",function(e){var t=e.controller.number,n=e.value;if(2===t){var a=n/128,r=a/(.1+a);l.setAttribute("material","opacity",r)}}),d.addListener("pitchbend","all",function(e){var n=e.value,a=l.note||0,r=t(a+2*n),i=r.s,o=r.x,c=r.y,s=r.z;l.object3D.position.set(o,c,s+.01),l.object3D.scale.set(1.1*i,1.1*i,1.1*i)})),function(){d&&(console.log("removing listeners for",i.a.get(d,"name")),d.removeListener("noteon"),d.removeListener("noteoff"),d.removeListener("controlchange"),d.removeListener("pitchbend"))}},[l,d,t,m]);var h=Object(o.useCallback)(s,[]);return c.a.createElement(Ue.Entity,{_ref:h,primitive:"a-sphere",material:{blending:"additive",color:he(1,0,1),opacity:0,transparent:!0},radius:.07})},it=new AudioContext;window.audioContext=it;var ot=function(e){var t=e.depthMax,n=void 0===t?1:t,r=e.isAlwaysCounterClockwise,l=void 0!==r&&r,s=e.rMax,u=void 0===s?.75:s,d=e.rMin,m=void 0===d?0:d,h=e.noteRange,f=void 0===h?[34,99]:h,p=e.pcsHighlighted,v=void 0===p?[0,2,4,5,7,9,11]:p,g=Object(o.useState)(!0),y=Object(a.a)(g,2),k=y[0],b=y[1],E=Object(o.useState)(),w=Object(a.a)(E,2),C=w[0],x=w[1],S=Object(o.useState)(),M=Object(a.a)(S,2),O=M[0],I=M[1],j=function(e){var t=e/128,a=(k?1:1.5)*u-((k?1:1.5)*u-m)*t;return{n:e,s:.75-e/192,x:a*(k&&l?-1:1)*Math.sin(e*Math.PI/6+.01),y:a*Math.cos(e*Math.PI/6+.01),z:k?n-n*t:n*t}};Object(o.useEffect)(function(){var e=function(e){var t=e.code;"r"===e.key&&b(function(e){return!e}),"Space"===t&&it.resume()};return window.addEventListener("keyup",e),function(){return window.removeEventListener("keyup",e)}},[]),Object(o.useEffect)(function(){console.log("el",O,"detector",C),it&&!C&&O?x(new nt.a({context:it,interpolateFrequency:!0,onDebug:function(e,t){var n=e.frequency,a=e.detected,r=e.rms,o=r/(.1+r),c=function(e){return 69+12*Math.log2(e/440)}(n),l=j(c),s=l.s,u=l.x,d=l.y,m=l.z;O.setAttribute("material","opacity",a?o:0),O.object3D.position.set(u,d,m+.01),O.object3D.scale.set(s,s,s),i.a.isFinite(c)&&O.setAttribute("material","color",he(c/12,.5,1))},minCorrelationIncrease:.5,normalize:"rms",stopAfterDetection:!1,length:1024,minNote:32,maxNote:128,minPeriod:2,maxPeriod:512,start:!0})):C&&!O&&(C.stop(),C.destroy())},[it,C,k,O]);var D=Object(o.useCallback)(I,[]);return c.a.createElement(Ue.Entity,{events:{click:function(){it.resume()}},position:{x:0,y:0,z:-6},scale:{x:4,y:4,z:4}},i.a.range(f[0],f[1]+1).map(j).map(function(e){var t=e.n,n=e.s,a=e.x,r=e.y,o=e.z;return c.a.createElement(c.a.Fragment,{key:t},c.a.createElement(Ue.Entity,{line:{color:"black",opacity:.3,start:i.a.pick(j(t+.25),["x","y","z"]),end:i.a.pick(j(t+.75),["x","y","z"]),visible:t<f[1]}}),c.a.createElement(Ye,{darkened:!i.a.includes(v,t%12),n:t,position:{x:a,y:r,z:o},scale:{x:n,y:n,z:n}}))}),c.a.createElement(rt,{noteToDimensions:j}),c.a.createElement(Ue.Entity,{_ref:D,primitive:"a-sphere",material:{blending:"additive",color:he(1,0,1),opacity:0,transparent:!0},radius:.1}))},ct=n(43),lt=function(e){var t=e.match.path;return c.a.createElement(Ue.Scene,null,c.a.createElement("a-assets",null),c.a.createElement(ct.c,null,c.a.createElement(ct.a,{path:"".concat(t,"/coltrane"),component:Xe}),c.a.createElement(ct.a,{path:"".concat(t,"/dod"),component:$e}),c.a.createElement(ct.a,{path:"".concat(t,"/pitchClassCollections"),component:at}),c.a.createElement(ct.a,{path:"".concat(t,"/pitchClassSpiral"),component:ot})),c.a.createElement(Ve,null),c.a.createElement(Ue.Entity,{id:"leftHand","oculus-touch-controls":"hand: left"}),c.a.createElement(Ue.Entity,{id:"rightHand","oculus-touch-controls":"hand: right"}))},st=n(190),ut=n(191),dt=n(57),mt=n(114),ht=n(188),ft=n(192),pt=n(193),vt=n(194),gt=n(195),yt=function e(t){return t>2?e(t/2):t<1?e(2*t):t};window.intToRation=function(e){return Object(gt.a)(yt(e))};!function e(){if("undefined"!==typeof AFRAME){var t={host:window.location.hostname,port:"8080",secure:!0},n=new j.a({plugin:new j.a.WebsocketClientPlugin(t)});n.open(),window.osc=n,window.AFRAME.registerComponent("midi",{init:function(){var e=this;this._onOscId=n.on("/midi/*",function(t){var n=t.address,r=Object(a.a)(t.args,2),o=r[0],c=r[1],l=i.a.last(n.split("/"));e.onOsc&&e.onOsc({instrument:l,note:o,vel:c})})},tick:function(e,t){this.onTick&&this.onTick(e,t)},remove:function(){n.off("/midi/*",this._onOscId)}}),window.AFRAME.registerComponent("osc",{init:function(){var e=this;this._onOscId=n.on("/midi/*",function(t){var n=t.address,r=Object(a.a)(t.args,2),o=r[0],c=r[1],l=i.a.last(n.split("/"));e.onOsc&&e.onOsc({instrument:l,note:o,vel:c})})},tick:function(e,t){this.onTick&&this.onTick(e,t)},remove:function(){n.off("/midi/*",this._onOscId)}})}else setTimeout(e,100)}();var kt=[["Mod12 Multiplication Tables","/multTableMod12",E],["PC-Number Notepad","/numpadMod12",O],["OSC Dataviz","/osc",j.a,!0],["PC Tonnetz","/tonnetz",We],["Banjo PCs","/banjo",f],["Guitar PCs","/guitar",k],["Mandolin PCs","/mandolin",Oe],["Ukulele PCs","/ukulele",_e],["Staff","/staff",Ke],["Mandelbrot","/mandelbrot",Me],["Ratio Lightship","/ratioLightship",Be]];T.a.render(c.a.createElement(function(){var e=Object(Ge.a)("(prefers-color-scheme: dark)"),t={palette:{action:{active:"#660000"},primary:{main:"#330033"},type:"dark"}},n={palette:{action:{active:"#660000"},primary:{main:"#330033"},type:"light"}},r=c.a.useMemo(function(){return Object(mt.a)(e?t:n)},[e]),i=c.a.useState(null),o=Object(a.a)(i,2),l=o[0],s=o[1],u=function(){return s(null)};return c.a.createElement(ht.a,{theme:r},c.a.createElement(p.a,null),c.a.createElement(dt.a,{basename:"/aframe-musicality"},c.a.createElement(ct.a,{path:"/",exact:!0,component:b}),c.a.createElement(ct.a,{path:"/vr",component:lt}),kt.map(function(e,t){var n=Object(a.a)(e,3),r=(n[0],n[1]),i=n[2];return c.a.createElement(ct.a,{component:i,key:t,path:r})}),c.a.createElement(st.a,{color:"transparent",onClick:function(){},position:"fixed",style:{top:"auto",bottom:0}},c.a.createElement(ut.a,null,c.a.createElement(ze.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(e){var t=e.currentTarget;return s(t)}},c.a.createElement(ft.a,null)),c.a.createElement(Ie.a,{anchorEl:l,open:!!l,onClose:u},c.a.createElement(je.a,null,c.a.createElement(dt.b,{style:{color:"lightgrey"},onClick:u,to:"/"},"Introduction")),c.a.createElement(je.a,{disabled:!0,divider:!0},"2D"),kt.map(function(e,t){var n=Object(a.a)(e,4),r=n[0],i=n[1];return n[2],!n[3]&&c.a.createElement(je.a,{key:t},c.a.createElement(dt.b,{style:{color:"darkmagenta"},onClick:u,to:i},r))}),c.a.createElement(je.a,{disabled:!0,divider:!0},"VR"),[["Coltrane Circle","/vr/coltrane"],["Dod","/vr/dod"],["PitchClassCollections","/vr/pitchClassCollections"],["PitchClassSpiral","/vr/pitchClassSpiral"]].map(function(e,t){var n=Object(a.a)(e,2),r=n[0],i=n[1];return c.a.createElement(je.a,{key:t},c.a.createElement(dt.b,{style:{color:"cyan"},onClick:u,to:i},r))})),c.a.createElement(Ne,null),c.a.createElement(ze.a,{edge:"start",color:"inherit"},c.a.createElement(pt.a,null)),c.a.createElement(ze.a,{edge:"start",color:"inherit"},c.a.createElement(vt.a,null))))))},null),document.querySelector("#sceneContainer"))}},[[119,1,2]]]);
//# sourceMappingURL=main.47ea8b98.chunk.js.map