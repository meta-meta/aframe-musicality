(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,n){e.exports=n(126)},126:function(e,t,n){"use strict";n.r(t);var a=n(13),r=(n(102),n(106),n(8)),i=n.n(r),o=n(0),c=n.n(o),l=n(12),s=Object(l.a)({root:{fontSize:20,fontFamily:"jetBrainsMono",display:"inline-flex",height:30,width:30,alignItems:"center",justifyContent:"center"},el:{fontFamily:"Segoe UI"},odd:{left:15,position:"relative"}})(function(e){var t=e.children,n=e.classes,a=e.className,r=void 0===a?"":a,i=e.isOdd,o=e.style;return c.a.createElement("div",{className:"".concat(n.root," ").concat(r," ").concat(i?n.odd:""),style:o},t)}),u=Object(l.a)({fretMarker:{color:"purple"}})(function(e){var t=e.classes.fretMarker,n=e.frets;return i.a.range(i.a.last(n)+1).map(function(e){return i.a.includes(n,e)?e:""}).map(function(e,n){return c.a.createElement(s,{className:t,key:n},e)})}),m=function(e){return{10:"\u0aea",11:"\u0190"}[e%12]||e%12},h=Object(l.a)({el:{fontFamily:"Segoe UI"}})(function(e){var t=e.classes,n=e.n,a=e.isOdd,r=e.style;return c.a.createElement(s,{className:n%12===11?t.el:"",isOdd:a,style:r},m(n))}),d=[1,3,5,7,10,12,15,17,19],f=function(){return c.a.createElement("div",{style:{display:"block",flexShrink:0}},c.a.createElement(u,{frets:d}),c.a.createElement("br",null),[0,9,5,0,0].map(function(e,t){return c.a.createElement(c.a.Fragment,null,i.a.range(23).map(function(t){return(t+e)%12}).map(function(e,n){return 4===t&&n<5?c.a.createElement(s,{key:n}):c.a.createElement(h,{key:n,n:e})}),c.a.createElement("br",null))}),c.a.createElement(u,{frets:d}))},p=n(160),g=[0,5,7,12,15,17,19,24],v=[4,9,2,7,11,4].reverse(),y=([0,5,0,5,9,5].reverse(),[0,7,0,4,7,0].reverse(),function(){return c.a.createElement("div",{style:{display:"block",flexShrink:0}},c.a.createElement(u,{frets:g}),c.a.createElement("br",null),v.map(function(e){return c.a.createElement(c.a.Fragment,null,i.a.range(25).map(function(t){return(t+e)%12}).map(function(e,t){return c.a.createElement(h,{key:t,n:e})}),c.a.createElement("br",null))}),c.a.createElement(u,{frets:g}))}),E=function(){return c.a.createElement("div",{style:{height:"100%",overflowY:"auto",padding:"20% 10%"}},c.a.createElement("h1",null,"What is this nonsense all about?"),c.a.createElement("p",null,'When I learned how to play an instrument, we started with "Hot Cross Buns", "Mary Had a Little Lamb", etc. We started with the first 3 notes in the key of "C". Eventually, we\'d build up to the other 4 notes. Then a new key was introduced. This one has a "Bb" -- the key of "F". At some point we\'d be introduced to an "accidental".'),c.a.createElement("p",null,'This left a lasting impression that the notes C, D, E, F, G, A, and B were the main notes. And these other things were in another class. They were harder -- harder to think about, harder to play, harder to keep track of, harder to say. C, D, E, F, G, A, and B are all single syllables. The other 5 notes were thought of as modifications of these main notes. "B flat", "C sharp", "D flat", yada yada. Wait are there 5 or are there 10?'),c.a.createElement("p",null,'"B sharp" is one of the first little musical jokes you get to say when you\'re in the know, until you learn that when you really get in deep, actually "B sharp" ',c.a.createElement("i",null,"is"),' a real note. There\'s even a "B double sharp"! How many notes ',c.a.createElement("i",null,"are"),' there!? Answer: infinite, as there are infinite numbers between 0 and 1, there are infinite pitches. Another answer, and this is the one we\'ll focus on in this website, is 12. There are 12 pitch-classes in the musical system that westerners refer to as "music theory" and more formally 12-tone equal temperament. All the fancy names like "B flat" and "F sharp" are just various spellings of the 12 pitch-classes in 12-TET.'),c.a.createElement("p",null,'This is all kind of interesting for a while and makes a young musician wonder about how deep this labyrinth gets. But it\'s all a smoke screen. And it gets even worse when you start to learn about intervals. Honestly, what\'s the use of a "diminished second" if not to sound pedantic and "technically correct"?'),c.a.createElement("p",null,"While I'll concede that it sort of makes sense when you're talking about notes ",c.a.createElement("i",null,"written on a staff"),", I'll maintain that it's a bullshit system to think in and it's needlessly convoluted, scares off all but the masochistic academics and overachievers. It adds a layer of cognitive as well as verbal overhead to otherwise simple concepts, and all so that we can pretend that music all fits into this diatonic model, with a few outliers that we call \"accidentals\". It makes the white keys approachable and the black keys scary and hard to name. \"Is it a C# or a Db\"? Why do we care, when we really just want to think about the one pitch we're trying to finger?"),c.a.createElement("p",null,"If we're going to commit to this arguably artificial model of 12 notes, which is but one of a panoply of more naturally harmonious tunings, if we're going to compromise with this 12-TET model so that we end up with 12 equally spaced notes around the octave, let's go all in and treat it with the simple terms it asks for. Let's treat these 12 notes equally instead of imagining this additional layer of complexity on top of them."),c.a.createElement("br",null),c.a.createElement("hr",null),c.a.createElement("h2",null,"Please consider:"),c.a.createElement("pre",null,i.a.range(12).map(function(e){return c.a.createElement(h,{key:e,n:e})})),c.a.createElement("p",null,' That\'s "oh" "one" "two" "three" "four" "five" "six" "sev" "eight" "nine" "ten" "el".'))},w=function(){return c.a.createElement(c.a.Fragment,null,i.a.range(6).map(function(e){return c.a.createElement("div",{style:{display:"block",flexShrink:0,margin:"1em"}},i.a.range(13).map(function(t){return c.a.createElement(c.a.Fragment,null,i.a.range(13).map(function(n){return c.a.createElement(h,{key:n,n:e+n*t})}),c.a.createElement("br",null))}))}))},b=n(2),k=n(1),x=n(5),S=n(3),C=n(6),M=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(x.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(r)))).state={text:""},n.handleKeyPress=function(e){var t={Backquote:"0",Digit1:"1",Digit2:"2",Digit3:"3",Digit4:"4",Digit5:"5",Digit6:"6",Digit7:"7",Digit8:"8",Digit9:"9",Digit0:"\u0aea",Minus:"\u0190",Equal:"0",Numpad0:"0",Numpad1:"1",Numpad2:"2",Numpad3:"3",Numpad4:"4",Numpad5:"5",Numpad6:"6",Numpad7:"7",Numpad8:"8",Numpad9:"9",NumpadDivide:"\u0aea",NumpadMultiply:"\u0190",NumpadDecimal:" ",NumpadEnter:"\n",Enter:"\n",Space:" "}[e.code];t&&(e.preventDefault(),n.setState({text:n.state.text+t}))},n.handleChange=function(e){var t=e.target.value;return n.setState({text:t})},n}return Object(C.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keypress",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keypress",this.handleKeyPress)}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("h3",null,"Use the numpad to enter pitch classes"),c.a.createElement("textarea",{cols:24,rows:20,onChange:this.handleChange,style:{background:"black",color:"darkgray",fontSize:20},value:this.state.text}))}}]),t}(o.Component),O=n(61),j=n.n(O),I=n(14),T=n.n(I),D=n(10),z=n(96),P=n(39),N=n(78),A=n.n(N),R=n(82),F=n.n(R),B=n(86),L=n.n(B),q=n(83),W=n.n(q),K=n(84),U=n.n(K),V=n(80),G=n.n(V),_=n(81),H=n.n(_),Y=n(88),X=n.n(Y),J=n(87),Q=n.n(J),Z=n(85),$=n.n(Z),ee=n(89),te=n.n(ee),ne=n(79),ae=n.n(ne),re={decayDuration:5e3,exciteEnergy:.05,exciteDuration:1e3,fundamentalFreq:200,hilbertN:64,hilbMand:[],isControlPanelOpen:!0,isPlaying:!1,isRegenNeeded:!0,maxIters:4096,panX:-.05,panY:0,partials:{},partialsCountMax:16,isSmooth:!1,tick:0,tickDuration:100,tickLastMillis:0,zoom:1.2},ie=new AudioContext,oe=[],ce=ie.createGain();window.masterGain=ce,ce.gain.value=1,ce.connect(ie.destination);var le=function(e){e.state=re;var t,n=function(e,t,n,a){if(0===a){1===n&&(t.x=e-1-t.x,t.y=e-1-t.y);var r=t.x;t.x=t.y,t.y=r}},a=function(e,t){return i.a.reduce(e,function(e,n,a){return e+n*t[a]},0)},r=function(t,n,r,i,o,c){var l=function(e,t){return{x:3.5*e-2.5,y:2*t-1}}(.5-r+(t-.5)/o,.5-i+(n-.5)/o),s=l.x,u=l.y;return e.state.isSmooth?function(e,t,n){for(var r,i,o=[0,0],c=0,l=0;l<n&&(r=o[0],i=o[1],o[0]=r*r-i*i+e,o[1]=2*r*i+t,!(a(o,o)>65536));l++)c++;return c>=n?n:c-Math.log2(Math.log2(a(o,o)))+4}(s,u,c):function(e,t,n){for(var a=0,r=0,i=0;a*a+r*r<4&&i<n;){var o=a*a-r*r+e;r=2*a*r+t,a=o,i++}return i}(s,u,c)},o=i.a.memoize(function(e){return i.a.range(e*e).map(function(t){return function(e,t){for(var a={x:0,y:0},r=1;r<e;r*=2){var i=1&t/2,o=1&(t^i);n(r,a,i,o),a.x+=r*i,a.y+=r*o,t/=4}return a}(e,t)})}),c=function(t){var n=t/e.state.hilbertN;return 1*Math.min(10,n/20)},l=i.a.memoize(function(e){return i()(100).range().map(function(e){return Math.pow(2,e)}).dropWhile(function(t){return e/t>=2}).first()}),s=function(t){var n=t.m,a=t.p,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.state,o=i.maxIters,c=i.partialsCountMax,s=l(c),u=l(a),m=255*Math.log2(a/u),h=r?0:255-225*Math.pow(u/s,2),d=r?255:n===o?0:30+225*Math.pow(u/s,2);return e.color(m,h,d,r?.7:255)},u=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.fill(s(t,n))},m=function(t,n,a,r){var i=t/r,o=n/r;e.rect(a.x*i,a.y*o,i,o)},h=function(t,n,a){var r=a.hilbertN,i=a.hilbMand,o=c(e.width/2);e.strokeWeight(o),e.stroke(0);var l=d(i.length,e.width/4,e.height);i.forEach(function(a,i){u(a),e.push(),e.translate(e.width/4,0),m(t,n,a,r),e.pop(),e.push(),e.translate(e.width/4*3,0),f(e.width/4,l,i),e.pop()})},d=function(e,t,n){for(var a=t*n,r=Math.sqrt(a/e),i=0,o=1;o<t;o++)if(!((i=t/o)>r)){var c=t/i;if(e/c*i+(e%c>0?i:0)<=n)break}return i},f=function(t,n,a){var r=t/n,i=a%r,o=Math.floor(a/r);o%2===1&&(i=r-(i+1)),e.rect(i*n,o*n,n,n)},p=function(){e.background(32),oe.forEach(function(e){var t=e.gain;t.gain.cancelScheduledValues(ie.currentTime),t.gain.linearRampToValueAtTime(0,ie.currentTime+.5)}),oe.length!==a&&(oe.forEach(function(e){var t=e.osc;e.gain,t.stop()}),oe=i.a.range(e.state.partialsCountMax).map(function(){var e=ie.createOscillator(),t=ie.createGain();return t.gain.value=0,e.connect(t),t.connect(ce),e.start(),{osc:e,gain:t}}),window.oscs=oe);var t=e.state,n=t.fundamentalFreq,a=t.partialsCountMax,c=function(){var t=e.state,n=t.hilbertN,a=t.maxIters,i=t.panX,c=t.panY,l=t.partialsCountMax,s=t.zoom;return o(n).map(function(e){var t=e.x,o=e.y,u=r(t/n,o/n,i,c,s,a);return{x:t,y:o,m:u,p:u===a?0:Math.floor((u-1)%l+1)}})}(),l=i()(c).map(function(e){return e.p}).filter(i.a.identity).uniq().sort().take(a).map(function(e,t){return[e,{amp:0,oscIdx:t}]}).fromPairs().value();i.a.each(l,function(e,t){var a=e.decayTimerId,r=e.oscIdx,i=e.zeroGainTimerId;clearTimeout(a),clearTimeout(i),oe[r].osc.frequency.cancelScheduledValues(ie.currentTime),oe[r].osc.frequency.linearRampToValueAtTime(t*n,ie.currentTime+.5)}),e.setState(function(t){var n=Object(P.a)({},t,{hilbMand:c,isRegenNeeded:!1,partials:l});return h(e.width/2,e.height,n),n})},g=function(t){var n=e.state.hilbMand,a=e.state.tick%n.length,r=n[a],i=d(n.length,e.width/4,e.height),o=c(e.width/2);e.strokeWeight(o),function(t,n,a){var r=(t+a-1)%t,i=e.state.hilbMand[r];u(i),e.stroke(0),e.push(),e.translate(e.width/4,0),m(e.width/2,e.height,i,e.state.hilbertN),e.pop(),e.push(),e.translate(e.width/4*3,0),f(e.width/4,n,r),e.pop()}(n.length,i,a),e.stroke(20*t%255,0,255),u(r,!0),e.push(),e.translate(e.width/4,0),m(e.width/2,e.height,r,e.state.hilbertN),e.pop(),e.push(),e.translate(e.width/4*3,0),f(e.width/4,i,a),e.pop()},v=function(){var t=e.height,n=e.width/4;e.noStroke();var a=e.state,r=a.partials,o=a.partialsCountMax;i.a.each(r,function(a,r){var i=a.amp,c=a.oscIdx,l=t/o,u=t*((r-1)/o),m=oe[c].gain.gain.value*n,h=s({m:1,p:r});e.fill(e.color(e.hue(h),255,8)),e.rect(0,u,n,l),e.fill(h),e.rect(0,u,m,l),e.fill(255),e.rect(i*n,u,1,l)})},y=!0;e.preload=function(){t=e.loadFont("JetBrainsMono-Regular.ttf")},e.setup=function(){e.createCanvas(e._width,e._height),e.colorMode(e.HSB),e.textFont(t)},e.draw=function(){var t=e.state,n=t.isPlaying,a=t.isRegenNeeded,r=t.tickDuration,o=t.tickLastMillis;a&&p();var c=e.millis();i.a.every([!a,n,c>o+r])&&(g(0),function(t){var n=e.state,a=n.decayDuration,r=n.exciteEnergy,o=n.exciteDuration,c=n.hilbMand,l=n.partials,s=c[n.tick%c.length].p;if(s>0){var u=l[s],m=u.amp,h=u.decayTimerId,d=u.oscIdx,f=u.zeroGainTimerId,p=oe[d].gain,g=i.a.isNumber(h)?m:p.gain.value,v=.8*Math.min(1,g+r*(1-g));u.amp=v,clearTimeout(h),clearTimeout(f),p.gain.cancelScheduledValues(0),p.gain.linearRampToValueAtTime(v,ie.currentTime+o/1e3),u.decayTimerId=setTimeout(function(){p.gain.exponentialRampToValueAtTime(1e-5,ie.currentTime+a/1e3),u.decayTimerId=null,u.zeroGainTimerId=setTimeout(function(){u.amp=0},a)},o)}}(),e.state.tick++,e.state.tickLastMillis=c),n&&v(),e.state.isPlaying||e.state.isControlPanelOpen?y&&(v(),h(e.width/2,e.height,e.state),y=!1):(y=!0,e.background(0,.1),e.noFill(),e.stroke(192,127,90),e.textSize(10),e.text("arrow keys to move",0,e.height/2-50,e.width,e.height),e.text("shift+arrow for zoom/resolution",0,e.height/2-35,e.width,e.height),e.text("shift+spacebar toggle controls",0,e.height/2-20,e.width,e.height),e.textSize(20),e.textAlign(e.CENTER),e.text("spacebar to start",0,e.height/2,e.width,e.height))},e.toggleAudio=function(){e.setState(function(e){var t=e.isPlaying;return t||"running"===ie.state||ie.resume(),t&&"running"===ie.state&&ie.suspend(),Object(P.a)({},e,{isPlaying:!e.isPlaying})})}},se=n(156),ue=n(128),me=n(166),he=n(157),de=Object(se.a)({paper:{background:"rgba(0,0,0,0.7)",paddingBottom:65}}),fe=function(e){var t=Object(o.useState)(re),n=Object(a.a)(t,2),r=n[0],i=n[1],c=Object(o.useState)(null),l=Object(a.a)(c,2),s=l[0],u=l[1],m=Object(o.useState)(null),h=Object(a.a)(m,2),d=h[0],f=h[1];s&&(s.setState=i,s.state=r);var p=Object(o.useCallback)(function(t){if(t){var n=new A.a(e,t);u(n),n._height=t.clientHeight,n._width=t.clientWidth;var r=new ResizeObserver(function(e){var t=Object(a.a)(e,1)[0].contentRect,r=t.height;!function(e,t){n.resizeCanvas(e,t),i(function(e){return Object(P.a)({},e,{isRegenNeeded:!0})})}(t.width,r)});f(r),r.observe(t)}else d&&d.disconnect()},[]);return{sketchInstance:s,sketchState:r,setSketchState:i,ref:p}},pe=function(e){var t=e.sketchState,n=e.setSketchState,a=e.stateKey,r=Object(z.a)(e,["sketchState","setSketchState","stateKey"]);return c.a.createElement("div",null,a,": ",t[a],c.a.createElement("br",null),c.a.createElement("input",Object.assign({type:"range",style:{width:400},value:t[a],onChange:function(e){var t=Number(e.target.value);n(function(e){return Object(P.a)({},e,Object(D.a)({},a,t))})}},r)))},ge=function(){var e=fe(le),t=e.ref,n=e.sketchInstance,a=e.sketchState,r=e.setSketchState;window.sketchInstance=n;var l=function(e){return function(t){return function(){"toggleAudio"!==t?e.setState(function(e){var n=e.hilbertN,a=e.isControlPanelOpen,r=e.isRegenNeeded,o=e.panX,c=e.panY,l=e.zoom,s=.1/l,u={moveLeft:{panX:o+s},moveRight:{panX:o-s},moveUp:{panY:c+s},moveDown:{panY:c-s},resDec:{hilbertN:Math.pow(2,Math.log2(n)-1)},resInc:{hilbertN:Math.min(256,Math.pow(2,Math.log2(n)+1))},toggleControlPanel:{isControlPanelOpen:!a,isRegenNeeded:r},zoomIn:{zoom:l*(10/9)},zoomOut:{zoom:.9*l}}[t];return Object(P.a)({},e,{isRegenNeeded:!i.a.isEmpty(u)},u)}):e.toggleAudio()}}}(n);return Object(o.useEffect)(function(){if(document.title="Mandelbrot Muse",n){var e=function(e){return function(t){var n=t.code,a=t.shiftKey,r=t.key;if("Space"!==n){var i={ArrowDown:function(){return a?"zoomOut":"moveDown"},ArrowLeft:function(){return a?"resDec":"moveLeft"},ArrowRight:function(){return a?"resInc":"moveRight"},ArrowUp:function(){return a?"zoomIn":"moveUp"}}[r];i&&e(i())()}else e(a?"toggleControlPanel":"toggleAudio")()}}(l);return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}},[n]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{ref:t,style:{alignSelf:"start",background:"radial-gradient(circle, rgba(74,153,117,1) 0%, rgba(188,148,233,0.6943726953672094) 100%)",height:"50vw",width:"100vw"}}),c.a.createElement("div",{style:{bottom:0,padding:0,position:"absolute",textAlign:"center",zIndex:1e6}},!a.isControlPanelOpen&&c.a.createElement(ue.a,{onClick:l("toggleControlPanel")},"show",c.a.createElement(ae.a,null),"controls"),c.a.createElement(me.a,{anchor:"bottom",classes:de(),color:"transparent",open:a.isControlPanelOpen,onClose:l("toggleControlPanel"),variant:"persistent"},c.a.createElement(he.a,{fullWidth:!0,size:"large"},c.a.createElement(ue.a,{onClick:l("toggleAudio")},a.isPlaying?c.a.createElement(H.a,null):c.a.createElement(G.a,null)),c.a.createElement(ue.a,{onClick:l("toggleControlPanel")},"hide controls")),c.a.createElement(he.a,{fullWidth:!0,size:"large"},c.a.createElement(ue.a,{onClick:l("moveUp")},c.a.createElement(F.a,null)),c.a.createElement(ue.a,{onClick:l("moveLeft")},c.a.createElement(W.a,null)),c.a.createElement(ue.a,{onClick:l("moveRight")},c.a.createElement(U.a,null)),c.a.createElement(ue.a,{onClick:l("zoomIn")},c.a.createElement($.a,null))),c.a.createElement(he.a,{fullWidth:!0,size:"large"},c.a.createElement(ue.a,{onClick:l("moveDown")},c.a.createElement(L.a,null)),c.a.createElement(ue.a,{onClick:l("resDec")},c.a.createElement(Q.a,null)),c.a.createElement(ue.a,{onClick:l("resInc")},c.a.createElement(X.a,null)),c.a.createElement(ue.a,{onClick:l("zoomOut")},c.a.createElement(te.a,null))),c.a.createElement(pe,{min:16,max:1e3,stateKey:"tickDuration",sketchState:a,setSketchState:r}),c.a.createElement(pe,{min:1,max:4e3,stateKey:"exciteDuration",sketchState:a,setSketchState:r}),c.a.createElement(pe,{min:10,max:8e3,stateKey:"decayDuration",sketchState:a,setSketchState:r}),c.a.createElement(pe,{min:.01,max:1,step:.01,stateKey:"exciteEnergy",sketchState:a,setSketchState:r}),c.a.createElement(pe,{min:.1,max:500,onPointerUp:function(){console.log("onPointerUp"),a.isRegenNeeded=!0},step:.1,stateKey:"fundamentalFreq",sketchState:a,setSketchState:r}),c.a.createElement(pe,{min:1,max:1e3,stateKey:"partialsCountMax",sketchState:a,setSketchState:r,onPointerUp:function(){console.log("onPointerUp"),a.isRegenNeeded=!0}}),c.a.createElement(pe,{min:64,max:8e3,stateKey:"maxIters",sketchState:a,setSketchState:r,onPointerUp:function(){console.log("onPointerUp"),a.isRegenNeeded=!0}}))))},ve=n(94).a.Flow,ye=function(){var e=function(){var e=Object(o.useState)(null),t=Object(a.a)(e,2),n=t[0],r=t[1],i=Object(o.useState)(null),c=Object(a.a)(i,2),l=c[0],s=c[1];return{context:n,ref:Object(o.useCallback)(function(e){if(e){var t=new ve.Renderer(e,ve.Renderer.Backends.SVG);t.resize(e.clientWidth,e.clientHeight),r(t.getContext());var n=new ResizeObserver(function(e){var n=Object(a.a)(e,1)[0].contentRect,r=n.height,i=n.width;t.resize(i,r)});s(n),n.observe(e)}else l.disconnect()},[])}}(),t=e.context,n=e.ref;if(t){t.setStrokeStyle("white"),t.setFillStyle("white");var r=new ve.Stave(50,0,1e4).addClef("treble").addKeySignature("Db").addTimeSignature("4/4").setContext(t).draw();window.VF=ve,window.context=t,window.treble=r;var i=new ve.Stave(50,60,1e4).addClef("bass").addTimeSignature("4/4").addKeySignature("Db").setContext(t).draw();new ve.StaveConnector(r,i).setType(ve.StaveConnector.type.BRACE).setContext(t).draw(),new ve.StaveConnector(r,i).setType(ve.StaveConnector.type.SINGLE_LEFT).setContext(t).draw()}return c.a.createElement("div",{style:{display:"block",width:"100%"}},c.a.createElement("div",{ref:n,style:{fill:"white",height:500,stroke:"white"}}))},Ee=function(){return c.a.createElement("div",{style:{display:"block",flexShrink:0}},i.a.range(30).map(function(e){return c.a.createElement(c.a.Fragment,null,i.a.range(50).map(function(t){var n=((e%2>0?(e-1)/2*11+3:e/2*11)+7*t)%12;return c.a.createElement(h,{key:t,n:n,isOdd:e%2===1})}),c.a.createElement("br",null))}))},we=[0,5,7,10,12],be=function(){return c.a.createElement("div",{style:{display:"block",flexShrink:0}},c.a.createElement(u,{frets:we}),c.a.createElement("br",null),[9,4,0,7].map(function(e){return c.a.createElement(c.a.Fragment,null,i.a.range(19).map(function(t){return(t+e)%12}).map(function(e,t){return c.a.createElement(h,{key:t,n:e})}),c.a.createElement("br",null))}),c.a.createElement(u,{frets:we}))},ke=n(158),xe=(n(120),n(18)),Se=function(){return c.a.createElement(xe.Entity,{primitive:"a-camera",id:"camera",position:{x:0,y:0,z:0},"look-controls":!0},c.a.createElement(xe.Entity,{primitive:"a-cursor",animation__click:{property:"scale",startEvents:"click",from:"0.1 0.1 0.1",to:"1 1 1",dur:150}}))};function Ce(e,t,n){var a,r,i,o,c,l,s,u;switch(1===arguments.length&&(t=e.s,n=e.v,e=e.h),l=n*(1-t),s=n*(1-(c=6*e-(o=Math.floor(6*e)))*t),u=n*(1-(1-c)*t),o%6){case 0:a=n,r=u,i=l;break;case 1:a=s,r=n,i=l;break;case 2:a=l,r=n,i=u;break;case 3:a=l,r=s,i=n;break;case 4:a=u,r=l,i=n;break;case 5:a=n,r=l,i=s}return function(e){var t=e.r,n=e.g,a=e.b;function r(e){var t=e.toString(16);return 1==t.length?"0"+t:t}return"#"+r(t)+r(n)+r(a)}({r:Math.round(255*a),g:Math.round(255*r),b:Math.round(255*i)})}var Me=function(e){return function(t){if(t){var n=t.components.osc;n.onOsc=function(t){t.instrument;var a=t.note,r=t.vel;a===e&&(n.vel=r)},n.onTick=function(e,a){n.vel,i.a.has(n,"vel")&&t.setAttribute("material","opacity",.05+.75*n.vel/128)}}}},Oe=function(e){var t=e.n,n=e.position,a=void 0===n?{x:0,y:0,z:0}:n,r=e.scale,i=void 0===r?{x:1,y:1,z:1}:r;return c.a.createElement(xe.Entity,{animation:{dur:500,property:"position",to:a},primitive:"a-sphere",material:{blending:"additive",color:Ce(t/12,.75,1),opacity:.05},osc:{},_ref:Me(t),radius:.1,scale:i},c.a.createElement(xe.Entity,{"look-at":"#camera",position:{x:0,y:0,z:0},scale:{x:2,y:2,z:2},text:{align:"center",color:Ce(t/12,.75,.5),font:"../".concat(t%12>9?"segoeui":"JetBrainsMono-Medium","-msdf.json"),negate:!1,transparent:!0,value:m(t)}}))},je=n(90),Ie={input:void 0,inputDevices:[],isDeviceSelectorVisible:!1,midiIn:i.a.zipObject(i.a.range(128),i.a.fill(new Array(128),0))},Te={setInputDevice:function(e,t){var n=e.state.counter+t;e.setState({counter:n})},setInputDevices:function(e,t){return e.setState({inputDevices:t})},setMidiEvent:function(e,t){return e.setState({midiIn:i.a.merge(e.state.midiIn,t)})},toggleDeviceSelector:function(e){return e.setState({isDeviceSelectorVisible:!e.state.isDeviceSelectorVisible})}},De=Object(je.a)(c.a,Ie,Te),ze=function(){var e=Object(o.useState)(!0),t=Object(a.a)(e,2),n=t[0],r=t[1];Object(o.useEffect)(function(){var e=function(e){"r"===e.key&&r(function(e){return!e})};return window.addEventListener("keyup",e),function(){return window.removeEventListener("keyup",e)}},[]);var l=De(),s=Object(a.a)(l,1)[0].midiIn,u=i()(12).range().map(function(e){return i()(s).pickBy(function(t,n){return n%12===e}).values().sum()}).value();return c.a.createElement(xe.Entity,{animation:"property: rotation; to: 0 ".concat(n?180:0," 0; dur: 500;"),position:"0 0 -3"},i()(12).range().filter(function(e){return e%2==0}).map(function(e){return{n:e,r:1.5,x:-Math.sin(e*Math.PI/6),y:Math.cos(e*Math.PI/6)}}).map(function(e){var t=e.n,n=e.r,a=e.x,r=e.y;return c.a.createElement(Oe,{midiIn:u[t],n:t,position:"".concat(n*a," ").concat(n*r," 0")})}).value(),i()(48).range().filter(function(e){return!i.a.includes([6,7,0,1],e%8)}).map(function(e,t){return{i:t,n:(2*(t+1)+2*Math.floor(t/4))%12,r:1.5,x:Math.sin((e+.5)*Math.PI/24),y:Math.cos((e+.5)*Math.PI/24)}}).map(function(e){var t=e.n,n=e.r,a=e.x,r=e.y;return c.a.createElement(Oe,{midiIn:u[t],n:t,position:"".concat(n*a," ").concat(n*r," 0"),scale:"0.5 0.5 0.5"})}).value(),i()(12).range().filter(function(e){return e%2!=0}).map(function(e){return{n:(e+6)%12,r:1.2,x:-Math.sin(e*Math.PI/6),y:Math.cos(e*Math.PI/6)}}).map(function(e){var t=e.n,n=e.r,a=e.x,r=e.y;return c.a.createElement(Oe,{midiIn:u[t],n:t,position:"".concat(n*a," ").concat(n*r," 0")})}).value(),i()(48).range().filter(function(e){return!i.a.includes([4,5,6,7],e%8)}).map(function(e,t){return{i:t,n:(2*t+9+2*Math.floor(t/4))%12,r:1.2,x:Math.sin((e-1.5)*Math.PI/24),y:Math.cos((e-1.5)*Math.PI/24)}}).map(function(e){var t=e.n,n=e.r,a=e.x,r=e.y;return c.a.createElement(Oe,{midiIn:u[t],n:t,position:"".concat(n*a," ").concat(n*r," 0"),scale:"0.5 0.5 0.5"})}).value())},Pe=n(21),Ne=1.3305869973355013,Ae=2.152934986677507,Re=[[0,-Ae,Ne],[0,Ae,-Ne],[Ae,-Ne,0],[-Ae,Ne,0],[0,-Ae,-Ne],[0,Ae,Ne],[-Ae,-Ne,0],[Ae,Ne,0],[-Ne,0,Ae],[Ne,0,-Ae],[Ne,0,Ae],[-Ne,0,-Ae]],Fe=function e(t){var n=t.rep,a=void 0===n?1:n,r=t.sat,i=t.stack,o=void 0===i?[]:i,l=t.n,s=void 0===l?0:l;return c.a.createElement(xe.Entity,{position:"0 0 0"},Re.map(function(e,t){return c.a.createElement(xe.Entity,{key:t,color:Ce(t*(1/12),r||1,1),events:{click:function(){return console.log(t)}},primitive:"a-sphere",position:e.join(" "),scale:[1,1,1].map(function(e){return.3*e/(a*a)}).join(" ")})}),a<3&&Re.map(function(t,n){return c.a.createElement(xe.Entity,{key:n,position:t.map(function(e){return 2*e}).join(" "),text:"color: ".concat(Ce((o.length?o[o.length-1]:n)*(1/12),1,1),"; align: center; value: ").concat([].concat(Object(Pe.a)(o),[n]).join(",")," - ").concat((s+n)%12,"; width: 5; zOffset: 0")},c.a.createElement(e,{rep:a+1,sat:.3,stack:[].concat(Object(Pe.a)(o),[n]),n:(s+n)%12}))}))},Be=n(91),Le=n.n(Be),qe=function(e){var t=e.depthMax,n=void 0===t?1:t,r=e.isAlwaysCounterClockwise,l=void 0!==r&&r,s=e.rMax,u=void 0===s?1:s,m=(e.rMin,e.noteRange),h=void 0===m?[0,128]:m,d=Object(o.useState)(!0),f=Object(a.a)(d,2),p=f[0],g=f[1],v=function(e){var t=e/128,a=u-u*t;return{n:e,s:.75-e/192,x:a*(p&&l?-1:1)*Math.sin(e*Math.PI/6+.01),y:a*Math.cos(e*Math.PI/6+.01),z:p?n-n*t:n*t}};Object(o.useEffect)(function(){var e=function(e){"r"===e.key&&g(function(e){return!e})};return window.addEventListener("keyup",e),function(){return window.removeEventListener("keyup",e)}},[]);var y=Object(o.useCallback)(function(e){var t;e?t=new Le.a({context:new AudioContext,interpolateFrequency:!0,onDetect:function(t,n){var a=t.frequency,r=(t.detected,t.rms),i=v(function(e){return 69+12*Math.log2(e/440)}(a)),o=i.s,c=i.x,l=i.y,s=i.z;e.setAttribute("material","opacity",r),e.object3D.position.set(c,l,s),e.object3D.scale.set(1.5*o,1.5*o,1.5*o)},onDebug:function(e,t){},minRms:.01,minCorrelation:.9,minCorreationIncrease:.5,normalize:"rms",stopAfterDetection:!1,length:1024,minNote:69,maxNote:80,minFrequency:440,maxFrequency:2e4,minPeriod:2,maxPeriod:512,start:!0}):(t.stop(),t.destroy())},[]),E=De(),w=Object(a.a)(E,1)[0].midiIn;i()(12).range().map(function(e){return i()(w).pickBy(function(t,n){return n%12===e}).values().sum()}).value();return c.a.createElement(xe.Entity,{position:{x:0,y:0,z:-6},scale:{x:4,y:4,z:4}},i.a.range(h[0],h[1]+1).map(v).map(function(e){var t=e.n,n=e.s,a=e.x,r=e.y,i=e.z;return c.a.createElement(Oe,{key:t,n:t,position:{x:a,y:r,z:i},scale:{x:n,y:n,z:n}})}),c.a.createElement(xe.Entity,{_ref:y,primitive:"a-sphere",material:{blending:"additive",color:Ce(1,0,1),opacity:0},radius:.1}))},We=n(36),Ke=function(e){var t=e.match.path;return c.a.createElement(xe.Scene,null,c.a.createElement("a-assets",null,c.a.createElement("img",{id:"groundTexture",src:"https://cdn.aframe.io/a-painter/images/floor.jpg"}),c.a.createElement("img",{id:"skyTexture",src:"https://cdn.aframe.io/a-painter/images/sky.jpg"})),c.a.createElement(We.c,null,c.a.createElement(We.a,{path:"".concat(t,"/coltrane"),component:ze}),c.a.createElement(We.a,{path:"".concat(t,"/dod"),component:Fe}),c.a.createElement(We.a,{path:"".concat(t,"/pitchClassSpiral"),component:qe})),c.a.createElement(xe.Entity,{height:"2048",primitive:"a-sky",radius:"30",rotation:"90 0 0",src:"#skyTexture","theta-length":"90",width:"2048"}),c.a.createElement(xe.Entity,{height:"2048",primitive:"a-sky",radius:"30",rotation:"90 0 180",src:"#skyTexture","theta-length":"90",width:"2048"}),c.a.createElement(Se,null),c.a.createElement(xe.Entity,{id:"leftHand","oculus-touch-controls":"hand: left"}),c.a.createElement(xe.Entity,{id:"rightHand","oculus-touch-controls":"hand: right"}))},Ue=n(161),Ve=n(162),Ge=n(163),_e=n(165),He=n(167),Ye=n(46),Xe=n(95),Je=n(159),Qe=n(168);!function e(){if("undefined"!==typeof AFRAME){var t={host:window.location.hostname,port:"8080",secure:!0},n=new j.a({plugin:new j.a.WebsocketClientPlugin(t)});n.open(),window.osc=n,window.AFRAME.registerComponent("osc",{init:function(){var e=this;this._onOscId=n.on("/midi/*",function(t){var n=t.address,r=Object(a.a)(t.args,2),o=r[0],c=r[1],l=i.a.last(n.split("/"));e.onOsc&&e.onOsc({instrument:l,note:o,vel:c})})},tick:function(e,t){this.onTick&&this.onTick(e,t)},remove:function(){n.off("/midi/*",this._onOscId)}})}else setTimeout(e,100)}();var Ze=[["Mod12 Multiplication Tables","/multTableMod12",w],["PC-Number Notepad","/numpadMod12",M],["OSC Dataviz","/osc",j.a,!0],["PC Tonnetz","/tonnetz",Ee],["Banjo PCs","/banjo",f],["Guitar PCs","/guitar",y],["Ukulele PCs","/ukulele",be],["Staff","/staff",ye],["Mandelbrot","/mandelbrot",ge]];T.a.render(c.a.createElement(function(){var e=Object(ke.a)("(prefers-color-scheme: dark)"),t=c.a.useMemo(function(){return Object(Xe.a)({palette:{action:{active:"#660000"},primary:{main:"#330033"},type:e?"dark":"light"}})},[e]),n=c.a.useState(null),r=Object(a.a)(n,2),i=r[0],o=r[1],l=function(){return o(null)};return c.a.createElement(Je.a,{theme:t},c.a.createElement(p.a,null),c.a.createElement(Ye.a,{basename:"/aframe-musicality"},c.a.createElement(We.a,{path:"/",exact:!0,component:E}),c.a.createElement(We.a,{path:"/vr",render:function(e){return c.a.createElement(Ke,e)}}),Ze.map(function(e,t){var n=Object(a.a)(e,3),r=(n[0],n[1]),i=n[2];return c.a.createElement(We.a,{component:i,key:t,path:r})}),c.a.createElement(Ue.a,{color:"transparent",position:"fixed",style:{top:"auto",bottom:0}},c.a.createElement(Ve.a,null,c.a.createElement(Ge.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(e){var t=e.currentTarget;return o(t)}},c.a.createElement(Qe.a,null)),c.a.createElement(_e.a,{anchorEl:i,open:!!i,onClose:l},c.a.createElement(He.a,null,c.a.createElement(Ye.b,{style:{color:"lightgrey"},onClick:l,to:"/"},"Introduction")),c.a.createElement(He.a,{disabled:!0,divider:!0},"2D"),Ze.map(function(e,t){var n=Object(a.a)(e,4),r=n[0],i=n[1];return n[2],!n[3]&&c.a.createElement(He.a,{key:t},c.a.createElement(Ye.b,{style:{color:"pink"},onClick:l,to:i},r))}),c.a.createElement(He.a,{disabled:!0,divider:!0},"VR"),[["Coltrane Circle","/vr/coltrane"],["Dod","/vr/dod"],["PitchClassSpiral","/vr/pitchClassSpiral"]].map(function(e,t){var n=Object(a.a)(e,2),r=n[0],i=n[1];return c.a.createElement(He.a,{key:t},c.a.createElement(Ye.b,{style:{color:"cyan"},onClick:l,to:i},r))}))))))},null),document.querySelector("#sceneContainer"))}},[[101,1,2]]]);
//# sourceMappingURL=main.63eb5e5b.chunk.js.map